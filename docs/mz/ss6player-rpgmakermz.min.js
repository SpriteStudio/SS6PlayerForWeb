/*:ja
 * @target MZ
 * @plugindesc SpriteStudio 6 アニメーション再生プラグイン
 * @version 0.7.0
 * @author Web Technology Corp.
 * @url https://github.com/SpriteStudio/SS6PlayerForWeb/tree/master/packages/ss6player-rpgmakermz
 * @help SS6Player for RPG Maker MZ
 *
 * 詳しい使い方は、GitHub リポジトリの README.md をお読みください。
 * https://github.com/SpriteStudio/SS6PlayerForWeb/tree/master/packages/ss6player-rpgmakermz/README.md
 *
 * デプロイメント時に「未使用ファイルを削除」オプションを使用した場合、
 * アニメーションを含むフォルダは削除されてしまいます。
 * 必ず、デプロイメント後にプラグインパラメータで指定したディレクトリを、
 * 出力先の同じ位置にコピーしてください。
 *
 * @param animationDir
 * @text ssfb アニメーションベースディレクトリ
 * @desc ssfb のフォルダを格納するベースディレクトリのパスです。
 * @type file
 * @default img/ssfb
 * @requiredAssets img/ssfb
 *
 * @param replaceSVActorSpriteFlag
 * @text SV アクター置き換え
 * @desc SV アクターを Sprite Studio アニメーションに置き換える機能の ON/OFF です。
 * @type boolean
 * @default false
 *
 * @param svActorDir
 * @text SV アクターディレクトリ
 * @desc SV アクターの SpriteStudio データを格納するディレクトリのパスです
 * @type file
 * @default img/ssfb/sv_actors
 * @requiredAssets img/ssfb/sv_actors
 *
 * @param svActorAnimationPack
 * @text SV アクターアニメーションパック名
 * @desc SV アクターが利用する Sprite Studio の共通アニメーションパック(ssae)名です
 * @type string
 * @default motions
 *
 * @param svActorHideWeaponGraphics
 * @text SV アクター武器非表示
 * @desc SV アクターの攻撃中の武器アニメーションを非表示にする機能の ON/OFF です。
 * @type boolean
 * @default true
 *
 * @param replaceSVEnemySpriteFlag
 * @text SV エネミー置き換え
 * @desc SV エネミーを Sprite Studio アニメーションに置き換える機能の ON/OFF です。
 * @type boolean
 * @default false
 *
 * @param svEnemyDir
 * @text SV エネミーディレクトリ
 * @desc SV アクターの SpriteStudio データを格納するディレクトリのパスです
 * @type file
 * @default img/ssfb/sv_enemies
 * @requiredAssets img/ssfb/sv_enemies
 *
 * @param svEnemyAnimationPack
 * @text SV エネミーアニメーションパック名
 * @desc SV エネミーが利用する Sprite Studio の共通アニメーションパック(ssae)名です
 * @type string
 * @default motions
 *
 * @param svEnemyAnimationName
 * @text SV エネミーアニメーション名
 * @desc SV エネミーが利用する Sprite Studio の共通アニメーション名です。
 * @type string
 * @default walk
 *
 *
 * @command loadSsfb
 * @text ssfbロード
 * @desc ssfb ファイルと関連画像をダウンロードしロードします。
 *
 * @arg ssfbId
 * @text ssfb ID
 * @desc 登録する ssfb ID です。他のコマンドから参照するのに利用します。
 * @type number
 * @min 1
 *
 * @arg ssfbFile
 * @text ssfbファイルパス
 * @desc ssfb ファイルをアニメーションディレクトリからの相対パスで指定してください。 (e.g. MeshBone/Knight.ssbp.ssfb)
 * @type string
 *
 *
 * @command setAsPicture
 * @text アニメーションピクチャの設定
 * @desc ピクチャとして表示するアニメーションを設定します。
 *       この後、画像を指定せずに「ピクチャの表示」を実行してください。
 *
 * @arg ssfbId
 * @text ssfb ID
 * @desc 利用する ssfb ID を指定してください。
 * @type number
 * @min 1
 *
 * @arg animePackName
 * @text アニメパック名
 * @desc 再生するアニメパック名(ssae)を指定してください。
 *       e.g. Knight_bomb
 * @type string
 *
 * @arg animeName
 * @text アニメ名
 * @desc 再生するアニメ名を指定してください。
 *       e.g. Balloon
 * @type string
 *
 * @arg scaleX
 * @text スケールX
 * @desc X のスケールを指定します
 * @type decimals
 * @default 1.0
 *
 * @arg scaleY
 * @text スケールY
 * @desc Y のスケールを指定します
 * @type decimals
 * @default 1.0
 *
 * @arg loop
 * @text 再生ループ回数
 * @desc 再生ループ回数を指定します。 -1 を指定すると無限ループで再生します。
 * @type number
 * @default 1
 * @min -1
 *
 *
 * @command waitForPicture
 * @text ピクチャ再生待ち
 * @desc アニメーションが再生完了するまでウエイトします。ピクチャにアニメーションがない場合とループ再生時は無視されます。
 *
 * @arg pictureId
 * @text Picture ID
 * @desc アニメーション再生中のピクチャの ID を指定してください。
 * @type number
 * @min 1
 *
 */

!function(t,e,n,i,a,r){"use strict";const s=new Int32Array(2),o=new Float32Array(s.buffer),b=new Float64Array(s.buffer),c=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];class d{constructor(t,e){this.low=0|t,this.high=0|e}static create(t,e){return 0==t&&0==e?d.ZERO:new d(t,e)}toFloat64(){return(this.low>>>0)+4294967296*this.high}equals(t){return this.low==t.low&&this.high==t.high}}var l;d.ZERO=new d(0,0),function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"}(l||(l={}));class h{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new h(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new d(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new d(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return s[0]=this.readInt32(t),o[0]}readFloat64(t){return s[c?0:1]=this.readInt32(t),s[c?1:0]=this.readInt32(t+4),b[0]}writeInt8(t,e){this.bytes_[t]=e}writeUint8(t,e){this.bytes_[t]=e}writeInt16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeUint16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeInt32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeUint32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeInt64(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)}writeUint64(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)}writeFloat32(t,e){o[0]=e,this.writeInt32(t,s[0])}writeFloat64(t,e){b[0]=e,this.writeInt32(t,s[c?0:1]),this.writeInt32(t+4,s[c?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let e=0;e<4;e++)t+=String.fromCharCode(this.readInt8(this.position_+4+e));return t}__offset(t,e){const n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0}__union(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}__string(t,e){t+=this.readInt32(t);const n=this.readInt32(t);let i="",a=0;if(t+=4,e===l.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;a<n;){let e;const n=this.readUint8(t+a++);if(n<192)e=n;else{const i=this.readUint8(t+a++);if(n<224)e=(31&n)<<6|63&i;else{const r=this.readUint8(t+a++);if(n<240)e=(15&n)<<12|(63&i)<<6|63&r;else{e=(7&n)<<18|(63&i)<<12|(63&r)<<6|63&this.readUint8(t+a++)}}}e<65536?i+=String.fromCharCode(e):(e-=65536,i+=String.fromCharCode(55296+(e>>10),56320+(1023&e)))}return i}__union_with_string(t,e){return"string"==typeof t?this.__string(e):this.__union(t,e)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+4}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let e=0;e<4;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+4+e))return!1;return!0}createLong(t,e){return d.create(t,e)}createScalarList(t,e){const n=[];for(let i=0;i<e;++i)null!==t(i)&&n.push(t(i));return n}createObjList(t,e){const n=[];for(let i=0;i<e;++i){const e=t(i);null!==e&&n.push(e.unpack())}return n}}const f=new Int32Array(2);var u;new Float32Array(f.buffer),new Float64Array(f.buffer),new Uint16Array(new Uint8Array([1,0]).buffer)[0],function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"}(u||(u={}));var p,_=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsAnimationInitialData=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsAnimationInitialData=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.index=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.lowflag=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0},t.prototype.highflag=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):0},t.prototype.priority=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.cellIndex=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.opacity=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.localopacity=function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.masklimen=function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.positionX=function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.positionY=function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.positionZ=function(){var t=this.bb.__offset(this.bb_pos,24);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.pivotX=function(){var t=this.bb.__offset(this.bb_pos,26);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.pivotY=function(){var t=this.bb.__offset(this.bb_pos,28);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.rotationX=function(){var t=this.bb.__offset(this.bb_pos,30);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.rotationY=function(){var t=this.bb.__offset(this.bb_pos,32);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.rotationZ=function(){var t=this.bb.__offset(this.bb_pos,34);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.scaleX=function(){var t=this.bb.__offset(this.bb_pos,36);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.scaleY=function(){var t=this.bb.__offset(this.bb_pos,38);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.localscaleX=function(){var t=this.bb.__offset(this.bb_pos,40);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.localscaleY=function(){var t=this.bb.__offset(this.bb_pos,42);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.sizeX=function(){var t=this.bb.__offset(this.bb_pos,44);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.sizeY=function(){var t=this.bb.__offset(this.bb_pos,46);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.uvMoveX=function(){var t=this.bb.__offset(this.bb_pos,48);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.uvMoveY=function(){var t=this.bb.__offset(this.bb_pos,50);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.uvRotation=function(){var t=this.bb.__offset(this.bb_pos,52);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.uvScaleX=function(){var t=this.bb.__offset(this.bb_pos,54);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.uvScaleY=function(){var t=this.bb.__offset(this.bb_pos,56);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.boundingRadius=function(){var t=this.bb.__offset(this.bb_pos,58);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.instanceValueCurKeyframe=function(){var t=this.bb.__offset(this.bb_pos,60);return t?this.bb.readInt32(this.bb_pos+t):0},t.prototype.instanceValueStartFrame=function(){var t=this.bb.__offset(this.bb_pos,62);return t?this.bb.readInt32(this.bb_pos+t):0},t.prototype.instanceValueEndFrame=function(){var t=this.bb.__offset(this.bb_pos,64);return t?this.bb.readInt32(this.bb_pos+t):0},t.prototype.instanceValueLoopNum=function(){var t=this.bb.__offset(this.bb_pos,66);return t?this.bb.readInt32(this.bb_pos+t):0},t.prototype.instanceValueSpeed=function(){var t=this.bb.__offset(this.bb_pos,68);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.instanceValueLoopflag=function(){var t=this.bb.__offset(this.bb_pos,70);return t?this.bb.readInt32(this.bb_pos+t):0},t.prototype.effectValueCurKeyframe=function(){var t=this.bb.__offset(this.bb_pos,72);return t?this.bb.readInt32(this.bb_pos+t):0},t.prototype.effectValueStartTime=function(){var t=this.bb.__offset(this.bb_pos,74);return t?this.bb.readInt32(this.bb_pos+t):0},t.prototype.effectValueSpeed=function(){var t=this.bb.__offset(this.bb_pos,76);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.effectValueLoopflag=function(){var t=this.bb.__offset(this.bb_pos,78);return t?this.bb.readInt32(this.bb_pos+t):0},t.startAnimationInitialData=function(t){t.startObject(38)},t.addIndex=function(t,e){t.addFieldInt16(0,e,0)},t.addLowflag=function(t,e){t.addFieldInt32(1,e,0)},t.addHighflag=function(t,e){t.addFieldInt32(2,e,0)},t.addPriority=function(t,e){t.addFieldInt16(3,e,0)},t.addCellIndex=function(t,e){t.addFieldInt16(4,e,0)},t.addOpacity=function(t,e){t.addFieldInt16(5,e,0)},t.addLocalopacity=function(t,e){t.addFieldInt16(6,e,0)},t.addMasklimen=function(t,e){t.addFieldInt16(7,e,0)},t.addPositionX=function(t,e){t.addFieldFloat32(8,e,0)},t.addPositionY=function(t,e){t.addFieldFloat32(9,e,0)},t.addPositionZ=function(t,e){t.addFieldFloat32(10,e,0)},t.addPivotX=function(t,e){t.addFieldFloat32(11,e,0)},t.addPivotY=function(t,e){t.addFieldFloat32(12,e,0)},t.addRotationX=function(t,e){t.addFieldFloat32(13,e,0)},t.addRotationY=function(t,e){t.addFieldFloat32(14,e,0)},t.addRotationZ=function(t,e){t.addFieldFloat32(15,e,0)},t.addScaleX=function(t,e){t.addFieldFloat32(16,e,0)},t.addScaleY=function(t,e){t.addFieldFloat32(17,e,0)},t.addLocalscaleX=function(t,e){t.addFieldFloat32(18,e,0)},t.addLocalscaleY=function(t,e){t.addFieldFloat32(19,e,0)},t.addSizeX=function(t,e){t.addFieldFloat32(20,e,0)},t.addSizeY=function(t,e){t.addFieldFloat32(21,e,0)},t.addUvMoveX=function(t,e){t.addFieldFloat32(22,e,0)},t.addUvMoveY=function(t,e){t.addFieldFloat32(23,e,0)},t.addUvRotation=function(t,e){t.addFieldFloat32(24,e,0)},t.addUvScaleX=function(t,e){t.addFieldFloat32(25,e,0)},t.addUvScaleY=function(t,e){t.addFieldFloat32(26,e,0)},t.addBoundingRadius=function(t,e){t.addFieldFloat32(27,e,0)},t.addInstanceValueCurKeyframe=function(t,e){t.addFieldInt32(28,e,0)},t.addInstanceValueStartFrame=function(t,e){t.addFieldInt32(29,e,0)},t.addInstanceValueEndFrame=function(t,e){t.addFieldInt32(30,e,0)},t.addInstanceValueLoopNum=function(t,e){t.addFieldInt32(31,e,0)},t.addInstanceValueSpeed=function(t,e){t.addFieldFloat32(32,e,0)},t.addInstanceValueLoopflag=function(t,e){t.addFieldInt32(33,e,0)},t.addEffectValueCurKeyframe=function(t,e){t.addFieldInt32(34,e,0)},t.addEffectValueStartTime=function(t,e){t.addFieldInt32(35,e,0)},t.addEffectValueSpeed=function(t,e){t.addFieldFloat32(36,e,0)},t.addEffectValueLoopflag=function(t,e){t.addFieldInt32(37,e,0)},t.endAnimationInitialData=function(t){return t.endObject()},t.createAnimationInitialData=function(e,n,i,a,r,s,o,b,c,d,l,h,f,u,p,_,m,y,v,I,S,F,P,g,E,A,D,V,O,M,C,L,w,T,N,x,k,R,U){return t.startAnimationInitialData(e),t.addIndex(e,n),t.addLowflag(e,i),t.addHighflag(e,a),t.addPriority(e,r),t.addCellIndex(e,s),t.addOpacity(e,o),t.addLocalopacity(e,b),t.addMasklimen(e,c),t.addPositionX(e,d),t.addPositionY(e,l),t.addPositionZ(e,h),t.addPivotX(e,f),t.addPivotY(e,u),t.addRotationX(e,p),t.addRotationY(e,_),t.addRotationZ(e,m),t.addScaleX(e,y),t.addScaleY(e,v),t.addLocalscaleX(e,I),t.addLocalscaleY(e,S),t.addSizeX(e,F),t.addSizeY(e,P),t.addUvMoveX(e,g),t.addUvMoveY(e,E),t.addUvRotation(e,A),t.addUvScaleX(e,D),t.addUvScaleY(e,V),t.addBoundingRadius(e,O),t.addInstanceValueCurKeyframe(e,M),t.addInstanceValueStartFrame(e,C),t.addInstanceValueEndFrame(e,L),t.addInstanceValueLoopNum(e,w),t.addInstanceValueSpeed(e,T),t.addInstanceValueLoopflag(e,N),t.addEffectValueCurKeyframe(e,x),t.addEffectValueStartTime(e,k),t.addEffectValueSpeed(e,R),t.addEffectValueLoopflag(e,U),t.endAnimationInitialData(e)},t}(),m=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAspartState=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAspartState=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.index=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.flag1=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint32(this.bb_pos+t):0},t.prototype.flag2=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint32(this.bb_pos+t):0},t.prototype.data=function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0},t.prototype.dataLength=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.dataArray=function(){var t=this.bb.__offset(this.bb_pos,10);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},t.startpartState=function(t){t.startObject(4)},t.addIndex=function(t,e){t.addFieldInt16(0,e,0)},t.addFlag1=function(t,e){t.addFieldInt32(1,e,0)},t.addFlag2=function(t,e){t.addFieldInt32(2,e,0)},t.addData=function(t,e){t.addFieldOffset(3,e,0)},t.createDataVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()},t.startDataVector=function(t,e){t.startVector(4,e,4)},t.endpartState=function(t){return t.endObject()},t.createpartState=function(e,n,i,a,r){return t.startpartState(e),t.addIndex(e,n),t.addFlag1(e,i),t.addFlag2(e,a),t.addData(e,r),t.endpartState(e)},t}(),y=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsframeDataIndex=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsframeDataIndex=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.states=function(t,e){var n=this.bb.__offset(this.bb_pos,4);return n?(e||new m).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.statesLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},t.startframeDataIndex=function(t){t.startObject(1)},t.addStates=function(t,e){t.addFieldOffset(0,e,0)},t.createStatesVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startStatesVector=function(t,e){t.startVector(4,e,4)},t.endframeDataIndex=function(t){return t.endObject()},t.createframeDataIndex=function(e,n){return t.startframeDataIndex(e),t.addStates(e,n),t.endframeDataIndex(e)},t}(),v=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAslabelDataItem=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAslabelDataItem=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.label=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.frameIndex=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt16(this.bb_pos+t):0},t.startlabelDataItem=function(t){t.startObject(2)},t.addLabel=function(t,e){t.addFieldOffset(0,e,0)},t.addFrameIndex=function(t,e){t.addFieldInt16(1,e,0)},t.endlabelDataItem=function(t){return t.endObject()},t.createlabelDataItem=function(e,n,i){return t.startlabelDataItem(e),t.addLabel(e,n),t.addFrameIndex(e,i),t.endlabelDataItem(e)},t}(),I=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsmeshDataIndices=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsmeshDataIndices=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.indices=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readFloat32(this.bb.__vector(this.bb_pos+e)+4*t):0},t.prototype.indicesLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.indicesArray=function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},t.startmeshDataIndices=function(t){t.startObject(1)},t.addIndices=function(t,e){t.addFieldOffset(0,e,0)},t.createIndicesVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addFloat32(e[n]);return t.endVector()},t.startIndicesVector=function(t,e){t.startVector(4,e,4)},t.endmeshDataIndices=function(t){return t.endObject()},t.createmeshDataIndices=function(e,n){return t.startmeshDataIndices(e),t.addIndices(e,n),t.endmeshDataIndices(e)},t}(),S=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsmeshDataUV=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsmeshDataUV=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.uv=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readFloat32(this.bb.__vector(this.bb_pos+e)+4*t):0},t.prototype.uvLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.uvArray=function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},t.startmeshDataUV=function(t){t.startObject(1)},t.addUv=function(t,e){t.addFieldOffset(0,e,0)},t.createUvVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addFloat32(e[n]);return t.endVector()},t.startUvVector=function(t,e){t.startVector(4,e,4)},t.endmeshDataUV=function(t){return t.endObject()},t.createmeshDataUV=function(e,n){return t.startmeshDataUV(e),t.addUv(e,n),t.endmeshDataUV(e)},t}(),F=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsuserDataItem=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsuserDataItem=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.flags=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.arrayIndex=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.dataType=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0},t.prototype.dataTypeLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.dataTypeArray=function(){var t=this.bb.__offset(this.bb_pos,8);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},t.prototype.data=function(t,e){var n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(e,this.bb.__vector(this.bb_pos+n)+4*t):null},t.prototype.dataLength=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0},t.startuserDataItem=function(t){t.startObject(4)},t.addFlags=function(t,e){t.addFieldInt16(0,e,0)},t.addArrayIndex=function(t,e){t.addFieldInt16(1,e,0)},t.addDataType=function(t,e){t.addFieldOffset(2,e,0)},t.createDataTypeVector=function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()},t.startDataTypeVector=function(t,e){t.startVector(1,e,1)},t.addData=function(t,e){t.addFieldOffset(3,e,0)},t.createDataVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startDataVector=function(t,e){t.startVector(4,e,4)},t.enduserDataItem=function(t){return t.endObject()},t.createuserDataItem=function(e,n,i,a,r){return t.startuserDataItem(e),t.addFlags(e,n),t.addArrayIndex(e,i),t.addDataType(e,a),t.addData(e,r),t.enduserDataItem(e)},t}(),P=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsuserDataPerFrame=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsuserDataPerFrame=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.frameIndex=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.data=function(t,e){var n=this.bb.__offset(this.bb_pos,6);return n?(e||new F).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.dataLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},t.startuserDataPerFrame=function(t){t.startObject(2)},t.addFrameIndex=function(t,e){t.addFieldInt16(0,e,0)},t.addData=function(t,e){t.addFieldOffset(1,e,0)},t.createDataVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startDataVector=function(t,e){t.startVector(4,e,4)},t.enduserDataPerFrame=function(t){return t.endObject()},t.createuserDataPerFrame=function(e,n,i){return t.startuserDataPerFrame(e),t.addFrameIndex(e,n),t.addData(e,i),t.enduserDataPerFrame(e)},t}(),g=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsAnimationData=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsAnimationData=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.defaultData=function(t,e){var n=this.bb.__offset(this.bb_pos,6);return n?(e||new _).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.defaultDataLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.frameData=function(t,e){var n=this.bb.__offset(this.bb_pos,8);return n?(e||new y).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.frameDataLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.userData=function(t,e){var n=this.bb.__offset(this.bb_pos,10);return n?(e||new P).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.userDataLength=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.labelData=function(t,e){var n=this.bb.__offset(this.bb_pos,12);return n?(e||new v).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.labelDataLength=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.meshsDataUV=function(t,e){var n=this.bb.__offset(this.bb_pos,14);return n?(e||new S).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.meshsDataUVLength=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.meshsDataIndices=function(t,e){var n=this.bb.__offset(this.bb_pos,16);return n?(e||new I).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.meshsDataIndicesLength=function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.startFrames=function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.endFrames=function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.totalFrames=function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.fps=function(){var t=this.bb.__offset(this.bb_pos,24);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.labelNum=function(){var t=this.bb.__offset(this.bb_pos,26);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.canvasSizeW=function(){var t=this.bb.__offset(this.bb_pos,28);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.canvasSizeH=function(){var t=this.bb.__offset(this.bb_pos,30);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.canvasPvotX=function(){var t=this.bb.__offset(this.bb_pos,32);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.canvasPvotY=function(){var t=this.bb.__offset(this.bb_pos,34);return t?this.bb.readFloat32(this.bb_pos+t):0},t.startAnimationData=function(t){t.startObject(16)},t.addName=function(t,e){t.addFieldOffset(0,e,0)},t.addDefaultData=function(t,e){t.addFieldOffset(1,e,0)},t.createDefaultDataVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startDefaultDataVector=function(t,e){t.startVector(4,e,4)},t.addFrameData=function(t,e){t.addFieldOffset(2,e,0)},t.createFrameDataVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startFrameDataVector=function(t,e){t.startVector(4,e,4)},t.addUserData=function(t,e){t.addFieldOffset(3,e,0)},t.createUserDataVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startUserDataVector=function(t,e){t.startVector(4,e,4)},t.addLabelData=function(t,e){t.addFieldOffset(4,e,0)},t.createLabelDataVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startLabelDataVector=function(t,e){t.startVector(4,e,4)},t.addMeshsDataUV=function(t,e){t.addFieldOffset(5,e,0)},t.createMeshsDataUVVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startMeshsDataUVVector=function(t,e){t.startVector(4,e,4)},t.addMeshsDataIndices=function(t,e){t.addFieldOffset(6,e,0)},t.createMeshsDataIndicesVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startMeshsDataIndicesVector=function(t,e){t.startVector(4,e,4)},t.addStartFrames=function(t,e){t.addFieldInt16(7,e,0)},t.addEndFrames=function(t,e){t.addFieldInt16(8,e,0)},t.addTotalFrames=function(t,e){t.addFieldInt16(9,e,0)},t.addFps=function(t,e){t.addFieldInt16(10,e,0)},t.addLabelNum=function(t,e){t.addFieldInt16(11,e,0)},t.addCanvasSizeW=function(t,e){t.addFieldInt16(12,e,0)},t.addCanvasSizeH=function(t,e){t.addFieldInt16(13,e,0)},t.addCanvasPvotX=function(t,e){t.addFieldFloat32(14,e,0)},t.addCanvasPvotY=function(t,e){t.addFieldFloat32(15,e,0)},t.endAnimationData=function(t){return t.endObject()},t.createAnimationData=function(e,n,i,a,r,s,o,b,c,d,l,h,f,u,p,_,m){return t.startAnimationData(e),t.addName(e,n),t.addDefaultData(e,i),t.addFrameData(e,a),t.addUserData(e,r),t.addLabelData(e,s),t.addMeshsDataUV(e,o),t.addMeshsDataIndices(e,b),t.addStartFrames(e,c),t.addEndFrames(e,d),t.addTotalFrames(e,l),t.addFps(e,h),t.addLabelNum(e,f),t.addCanvasSizeW(e,u),t.addCanvasSizeH(e,p),t.addCanvasPvotX(e,_),t.addCanvasPvotY(e,m),t.endAnimationData(e)},t}();!function(t){t[t.Invalid=-1]="Invalid",t[t.Nulltype=0]="Nulltype",t[t.Normal=1]="Normal",t[t.Text=2]="Text",t[t.Instance=3]="Instance",t[t.Armature=4]="Armature",t[t.Effect=5]="Effect",t[t.Mesh=6]="Mesh",t[t.Movenode=7]="Movenode",t[t.Constraint=8]="Constraint",t[t.Mask=9]="Mask",t[t.Joint=10]="Joint",t[t.Bonepoint=11]="Bonepoint"}(p||(p={}));var E,A,D,V=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsPartData=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsPartData=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.index=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.parentIndex=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.type=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt8(this.bb_pos+t):p.Nulltype},t.prototype.boundsType=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.alphaBlendType=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.refname=function(t){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.effectfilename=function(t){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.colorLabel=function(t){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.maskInfluence=function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readInt16(this.bb_pos+t):0},t.startPartData=function(t){t.startObject(10)},t.addName=function(t,e){t.addFieldOffset(0,e,0)},t.addIndex=function(t,e){t.addFieldInt16(1,e,0)},t.addParentIndex=function(t,e){t.addFieldInt16(2,e,0)},t.addType=function(t,e){t.addFieldInt8(3,e,p.Nulltype)},t.addBoundsType=function(t,e){t.addFieldInt16(4,e,0)},t.addAlphaBlendType=function(t,e){t.addFieldInt16(5,e,0)},t.addRefname=function(t,e){t.addFieldOffset(6,e,0)},t.addEffectfilename=function(t,e){t.addFieldOffset(7,e,0)},t.addColorLabel=function(t,e){t.addFieldOffset(8,e,0)},t.addMaskInfluence=function(t,e){t.addFieldInt16(9,e,0)},t.endPartData=function(t){return t.endObject()},t.createPartData=function(e,n,i,a,r,s,o,b,c,d,l){return t.startPartData(e),t.addName(e,n),t.addIndex(e,i),t.addParentIndex(e,a),t.addType(e,r),t.addBoundsType(e,s),t.addAlphaBlendType(e,o),t.addRefname(e,b),t.addEffectfilename(e,c),t.addColorLabel(e,d),t.addMaskInfluence(e,l),t.endPartData(e)},t}(),O=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsAnimePackData=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsAnimePackData=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.parts=function(t,e){var n=this.bb.__offset(this.bb_pos,6);return n?(e||new V).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.partsLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.animations=function(t,e){var n=this.bb.__offset(this.bb_pos,8);return n?(e||new g).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.animationsLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},t.startAnimePackData=function(t){t.startObject(3)},t.addName=function(t,e){t.addFieldOffset(0,e,0)},t.addParts=function(t,e){t.addFieldOffset(1,e,0)},t.createPartsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startPartsVector=function(t,e){t.startVector(4,e,4)},t.addAnimations=function(t,e){t.addFieldOffset(2,e,0)},t.createAnimationsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startAnimationsVector=function(t,e){t.startVector(4,e,4)},t.endAnimePackData=function(t){return t.endObject()},t.createAnimePackData=function(e,n,i,a){return t.startAnimePackData(e),t.addName(e,n),t.addParts(e,i),t.addAnimations(e,a),t.endAnimePackData(e)},t}(),M=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsCellMap=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsCellMap=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.imagePath=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.index=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.wrapmode=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.filtermode=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt16(this.bb_pos+t):0},t.startCellMap=function(t){t.startObject(5)},t.addName=function(t,e){t.addFieldOffset(0,e,0)},t.addImagePath=function(t,e){t.addFieldOffset(1,e,0)},t.addIndex=function(t,e){t.addFieldInt16(2,e,0)},t.addWrapmode=function(t,e){t.addFieldInt16(3,e,0)},t.addFiltermode=function(t,e){t.addFieldInt16(4,e,0)},t.endCellMap=function(t){return t.endObject()},t.createCellMap=function(e,n,i,a,r,s){return t.startCellMap(e),t.addName(e,n),t.addImagePath(e,i),t.addIndex(e,a),t.addWrapmode(e,r),t.addFiltermode(e,s),t.endCellMap(e)},t}(),C=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsCell=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsCell=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.cellMap=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?(t||new M).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null},t.prototype.indexInCellMap=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.x=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.y=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.width=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.height=function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.pivotX=function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.pivotY=function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.u1=function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.v1=function(){var t=this.bb.__offset(this.bb_pos,24);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.u2=function(){var t=this.bb.__offset(this.bb_pos,26);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.v2=function(){var t=this.bb.__offset(this.bb_pos,28);return t?this.bb.readFloat32(this.bb_pos+t):0},t.startCell=function(t){t.startObject(13)},t.addName=function(t,e){t.addFieldOffset(0,e,0)},t.addCellMap=function(t,e){t.addFieldOffset(1,e,0)},t.addIndexInCellMap=function(t,e){t.addFieldInt16(2,e,0)},t.addX=function(t,e){t.addFieldInt16(3,e,0)},t.addY=function(t,e){t.addFieldInt16(4,e,0)},t.addWidth=function(t,e){t.addFieldInt16(5,e,0)},t.addHeight=function(t,e){t.addFieldInt16(6,e,0)},t.addPivotX=function(t,e){t.addFieldFloat32(7,e,0)},t.addPivotY=function(t,e){t.addFieldFloat32(8,e,0)},t.addU1=function(t,e){t.addFieldFloat32(9,e,0)},t.addV1=function(t,e){t.addFieldFloat32(10,e,0)},t.addU2=function(t,e){t.addFieldFloat32(11,e,0)},t.addV2=function(t,e){t.addFieldFloat32(12,e,0)},t.endCell=function(t){return t.endObject()},t}(),L=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsEffectNode=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsEffectNode=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.arrayIndex=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.parentIndex=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.type=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.cellIndex=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.blendType=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.numBehavior=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.BehaviorType=function(t){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0},t.prototype.BehaviorTypeLength=function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.BehaviorTypeArray=function(){var t=this.bb.__offset(this.bb_pos,16);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},t.prototype.Behavior=function(t,e){var n=this.bb.__offset(this.bb_pos,18);return n?this.bb.__union(e,this.bb.__vector(this.bb_pos+n)+4*t):null},t.prototype.BehaviorLength=function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0},t.startEffectNode=function(t){t.startObject(8)},t.addArrayIndex=function(t,e){t.addFieldInt16(0,e,0)},t.addParentIndex=function(t,e){t.addFieldInt16(1,e,0)},t.addType=function(t,e){t.addFieldInt16(2,e,0)},t.addCellIndex=function(t,e){t.addFieldInt16(3,e,0)},t.addBlendType=function(t,e){t.addFieldInt16(4,e,0)},t.addNumBehavior=function(t,e){t.addFieldInt16(5,e,0)},t.addBehaviorType=function(t,e){t.addFieldOffset(6,e,0)},t.createBehaviorTypeVector=function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()},t.startBehaviorTypeVector=function(t,e){t.startVector(1,e,1)},t.addBehavior=function(t,e){t.addFieldOffset(7,e,0)},t.createBehaviorVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startBehaviorVector=function(t,e){t.startVector(4,e,4)},t.endEffectNode=function(t){return t.endObject()},t.createEffectNode=function(e,n,i,a,r,s,o,b,c){return t.startEffectNode(e),t.addArrayIndex(e,n),t.addParentIndex(e,i),t.addType(e,a),t.addCellIndex(e,r),t.addBlendType(e,s),t.addNumBehavior(e,o),t.addBehaviorType(e,b),t.addBehavior(e,c),t.endEffectNode(e)},t}(),w=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsEffectFile=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsEffectFile=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.fps=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.isLockRandSeed=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.lockRandSeed=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.layoutScaleX=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.layoutScaleY=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.numNodeList=function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.effectNode=function(t,e){var n=this.bb.__offset(this.bb_pos,18);return n?(e||new L).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.effectNodeLength=function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0},t.startEffectFile=function(t){t.startObject(8)},t.addName=function(t,e){t.addFieldOffset(0,e,0)},t.addFps=function(t,e){t.addFieldInt16(1,e,0)},t.addIsLockRandSeed=function(t,e){t.addFieldInt16(2,e,0)},t.addLockRandSeed=function(t,e){t.addFieldInt16(3,e,0)},t.addLayoutScaleX=function(t,e){t.addFieldInt16(4,e,0)},t.addLayoutScaleY=function(t,e){t.addFieldInt16(5,e,0)},t.addNumNodeList=function(t,e){t.addFieldInt16(6,e,0)},t.addEffectNode=function(t,e){t.addFieldOffset(7,e,0)},t.createEffectNodeVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startEffectNodeVector=function(t,e){t.startVector(4,e,4)},t.endEffectFile=function(t){return t.endObject()},t.createEffectFile=function(e,n,i,a,r,s,o,b,c){return t.startEffectFile(e),t.addName(e,n),t.addFps(e,i),t.addIsLockRandSeed(e,a),t.addLockRandSeed(e,r),t.addLayoutScaleX(e,s),t.addLayoutScaleY(e,o),t.addNumNodeList(e,b),t.addEffectNode(e,c),t.endEffectFile(e)},t}();!function(t){t[t.NONE=0]="NONE",t[t.EffectParticleElementBasic=1]="EffectParticleElementBasic",t[t.EffectParticleElementRndSeedChange=2]="EffectParticleElementRndSeedChange",t[t.EffectParticleElementDelay=3]="EffectParticleElementDelay",t[t.EffectParticleElementGravity=4]="EffectParticleElementGravity",t[t.EffectParticleElementPosition=5]="EffectParticleElementPosition",t[t.EffectParticleElementRotation=6]="EffectParticleElementRotation",t[t.EffectParticleElementRotationTrans=7]="EffectParticleElementRotationTrans",t[t.EffectParticleElementTransSpeed=8]="EffectParticleElementTransSpeed",t[t.EffectParticleElementTangentialAcceleration=9]="EffectParticleElementTangentialAcceleration",t[t.EffectParticleElementInitColor=10]="EffectParticleElementInitColor",t[t.EffectParticleElementTransColor=11]="EffectParticleElementTransColor",t[t.EffectParticleElementAlphaFade=12]="EffectParticleElementAlphaFade",t[t.EffectParticleElementSize=13]="EffectParticleElementSize",t[t.EffectParticleElementTransSize=14]="EffectParticleElementTransSize",t[t.EffectParticlePointGravity=15]="EffectParticlePointGravity",t[t.EffectParticleTurnToDirectionEnabled=16]="EffectParticleTurnToDirectionEnabled",t[t.EffectParticleInfiniteEmitEnabled=17]="EffectParticleInfiniteEmitEnabled"}(E||(E={})),function(t){t[t.INVISIBLE=1]="INVISIBLE",t[t.FLIP_H=2]="FLIP_H",t[t.FLIP_V=4]="FLIP_V",t[t.CELL_INDEX=8]="CELL_INDEX",t[t.POSITION_X=16]="POSITION_X",t[t.POSITION_Y=32]="POSITION_Y",t[t.POSITION_Z=64]="POSITION_Z",t[t.PIVOT_X=128]="PIVOT_X",t[t.PIVOT_Y=256]="PIVOT_Y",t[t.ROTATIONX=512]="ROTATIONX",t[t.ROTATIONY=1024]="ROTATIONY",t[t.ROTATIONZ=2048]="ROTATIONZ",t[t.SCALE_X=4096]="SCALE_X",t[t.SCALE_Y=8192]="SCALE_Y",t[t.LOCALSCALE_X=16384]="LOCALSCALE_X",t[t.LOCALSCALE_Y=32768]="LOCALSCALE_Y",t[t.OPACITY=65536]="OPACITY",t[t.LOCALOPACITY=131072]="LOCALOPACITY",t[t.PARTS_COLOR=262144]="PARTS_COLOR",t[t.VERTEX_TRANSFORM=524288]="VERTEX_TRANSFORM",t[t.SIZE_X=1048576]="SIZE_X",t[t.SIZE_Y=2097152]="SIZE_Y",t[t.U_MOVE=4194304]="U_MOVE",t[t.V_MOVE=8388608]="V_MOVE",t[t.UV_ROTATION=16777216]="UV_ROTATION",t[t.U_SCALE=33554432]="U_SCALE",t[t.V_SCALE=67108864]="V_SCALE",t[t.BOUNDINGRADIUS=134217728]="BOUNDINGRADIUS",t[t.MASK=268435456]="MASK",t[t.PRIORITY=536870912]="PRIORITY",t[t.INSTANCE_KEYFRAME=1073741824]="INSTANCE_KEYFRAME",t[t.EFFECT_KEYFRAME=2147483648]="EFFECT_KEYFRAME"}(A||(A={})),function(t){t[t.MESHDATA=1]="MESHDATA"}(D||(D={}));var T,N,x=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsProjectData=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsProjectData=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.bufferHasIdentifier=function(t){return t.__has_identifier("SSFB")},t.prototype.dataId=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb_pos+t):0},t.prototype.version=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint32(this.bb_pos+t):0},t.prototype.flags=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint32(this.bb_pos+t):0},t.prototype.imageBaseDir=function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.cells=function(t,e){var n=this.bb.__offset(this.bb_pos,12);return n?(e||new C).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.cellsLength=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.animePacks=function(t,e){var n=this.bb.__offset(this.bb_pos,14);return n?(e||new O).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.animePacksLength=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.effectFileList=function(t,e){var n=this.bb.__offset(this.bb_pos,16);return n?(e||new w).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.effectFileListLength=function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.numCells=function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.numAnimePacks=function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.numEffectFileList=function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readInt16(this.bb_pos+t):0},t.startProjectData=function(t){t.startObject(10)},t.addDataId=function(t,e){t.addFieldInt32(0,e,0)},t.addVersion=function(t,e){t.addFieldInt32(1,e,0)},t.addFlags=function(t,e){t.addFieldInt32(2,e,0)},t.addImageBaseDir=function(t,e){t.addFieldOffset(3,e,0)},t.addCells=function(t,e){t.addFieldOffset(4,e,0)},t.createCellsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startCellsVector=function(t,e){t.startVector(4,e,4)},t.addAnimePacks=function(t,e){t.addFieldOffset(5,e,0)},t.createAnimePacksVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startAnimePacksVector=function(t,e){t.startVector(4,e,4)},t.addEffectFileList=function(t,e){t.addFieldOffset(6,e,0)},t.createEffectFileListVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startEffectFileListVector=function(t,e){t.startVector(4,e,4)},t.addNumCells=function(t,e){t.addFieldInt16(7,e,0)},t.addNumAnimePacks=function(t,e){t.addFieldInt16(8,e,0)},t.addNumEffectFileList=function(t,e){t.addFieldInt16(9,e,0)},t.endProjectData=function(t){return t.endObject()},t.finishProjectDataBuffer=function(t,e){t.finish(e,"SSFB")},t.finishSizePrefixedProjectDataBuffer=function(t,e){t.finish(e,"SSFB",!0)},t.createProjectData=function(e,n,i,a,r,s,o,b,c,d,l){return t.startProjectData(e),t.addDataId(e,n),t.addVersion(e,i),t.addFlags(e,a),t.addImageBaseDir(e,r),t.addCells(e,s),t.addAnimePacks(e,o),t.addEffectFileList(e,b),t.addNumCells(e,c),t.addNumAnimePacks(e,d),t.addNumEffectFileList(e,l),t.endProjectData(e)},t}(),k=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.prototype.integer=function(){return this.bb.readInt32(this.bb_pos)},t.sizeOf=function(){return 4},t.createuserDataInteger=function(t,e){return t.prep(4,4),t.writeInt32(e),t.offset()},t}(),R=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.prototype.x=function(){return this.bb.readInt32(this.bb_pos)},t.prototype.y=function(){return this.bb.readInt32(this.bb_pos+4)},t.sizeOf=function(){return 8},t.createuserDataPoint=function(t,e,n){return t.prep(4,8),t.writeInt32(n),t.writeInt32(e),t.offset()},t}(),U=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.prototype.x=function(){return this.bb.readInt32(this.bb_pos)},t.prototype.y=function(){return this.bb.readInt32(this.bb_pos+4)},t.prototype.w=function(){return this.bb.readInt32(this.bb_pos+8)},t.prototype.h=function(){return this.bb.readInt32(this.bb_pos+12)},t.sizeOf=function(){return 16},t.createuserDataRect=function(t,e,n,i,a){return t.prep(4,16),t.writeInt32(a),t.writeInt32(i),t.writeInt32(n),t.writeInt32(e),t.offset()},t}(),Y=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsuserDataString=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsuserDataString=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.length=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0},t.prototype.data=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},t.startuserDataString=function(t){t.startObject(2)},t.addLength=function(t,e){t.addFieldInt32(0,e,0)},t.addData=function(t,e){t.addFieldOffset(1,e,0)},t.enduserDataString=function(t){return t.endObject()},t.createuserDataString=function(e,n,i){return t.startuserDataString(e),t.addLength(e,n),t.addData(e,i),t.enduserDataString(e)},t}();!function(t){t[t.NONE=0]="NONE",t[t.userDataInteger=1]="userDataInteger",t[t.userDataRect=2]="userDataRect",t[t.userDataPoint=3]="userDataPoint",t[t.userDataString=4]="userDataString"}(T||(T={})),function(t){t[t.LT=1]="LT",t[t.RT=2]="RT",t[t.LB=4]="LB",t[t.RB=8]="RB",t[t.ONE=16]="ONE"}(N||(N={}));var X=function(){function e(t,e,n,i,a,r,s){if("string"==typeof t){var o=t,b=e,c=void 0!==n?n:0,d=void 0!==i?i:0,l=void 0!==a?a:null,h=void 0!==r?r:null,f=void 0!==s?s:null;this.ssfbPath=o;var u=o.lastIndexOf("/");this.rootPath=o.substring(0,u)+"/",this.status="not ready",this.onComplete=b,this.onError=l,this.onTimeout=h,this.onRetry=f,this.LoadFlatBuffersProject(o,c,d)}else if("object"==typeof t&&t.constructor===Uint8Array){var p=t,_=e;this.onComplete=void 0!==n?n:null,this.load(p,_)}}return e.prototype.LoadFlatBuffersProject=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0);var i=this,a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.timeout=e,a.onload=function(){if(a.status>=200&&a.status<400){var r=this.response,s=new Uint8Array(r),o=new h(s);i.fbObj=x.getRootAsProjectData(o),i.LoadCellResources()}else null!==i.onError&&i.onError(t,e,n,a)},a.ontimeout=function(){n>0?(null!==i.onRetry&&i.onRetry(t,e,n-1,a),i.LoadFlatBuffersProject(t,e,n-1)):null!==i.onTimeout&&i.onTimeout(t,e,n,a)},a.onerror=function(){null!==i.onError&&i.onError(t,e,n,a)},a.send(null)},e.prototype.LoadCellResources=function(){for(var e=this,n=new t.Loader,i=[],a=function(t){i.some((function(n){return n===e.fbObj.cells(t).cellMap().index()}))||(i.push(e.fbObj.cells(t).cellMap().index()),n.add(e.fbObj.cells(t).cellMap().name(),e.rootPath+r.fbObj.cells(t).cellMap().imagePath()))},r=this,s=0;s<e.fbObj.cellsLength();s++)a(s);n.load((function(t,n){e.resources=n,e.status="ready",null!==e.onComplete&&e.onComplete()}))},e.prototype.load=function(e,n){var i=new h(e);this.fbObj=x.getRootAsProjectData(i);var a=new t.Loader;for(var r in n){for(var s=n[r],o="",b=s.byteLength,c=0;c<b;c++)o+=String.fromCharCode(s[c]);var d="data:image/png;base64,"+window.btoa(o);a.add(r,d)}var l=this;a.load((function(t,e){l.resources=e,l.status="ready",null!==l.onComplete&&l.onComplete()}))},e}(),j=function(t,e){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var B=function(){this.refStartframe=0,this.refEndframe=0,this.refSpeed=1,this.refloopNum=0,this.infinity=!1,this.reverse=!1,this.pingpong=!1,this.independent=!1},z=function(t){function s(e,n,r){void 0===n&&(n=null),void 0===r&&(r=null);var s=t.call(this)||this;return s.animation=[],s.curAnimePackName=null,s.curAnimeName=null,s.curAnimation=null,s.curAnimePackData=null,s.parts=-1,s.parentIndex=[],s.prio2index=[],s.userData=[],s.frameDataCache={},s.currentCachedFrameNumber=-1,s.liveFrame=[],s.colorMatrixFilterCache=[],s.defaultFrameMap=[],s.parentAlpha=1,s.prevCellID=[],s.prevMesh=[],s.substituteOverWrite=[],s.substituteKeyParam=[],s.alphaBlendType=[],s._uint32=new Uint32Array(1),s._float32=new Float32Array(s._uint32.buffer),s.defaultColorFilter=new a.ColorMatrixFilter,s.ss6project=e,s.fbObj=s.ss6project.fbObj,s.resources=s.ss6project.resources,s.parentAlpha=1,null!==n&&null!==r&&s.Setup(n,r),i.Ticker.shared.add(s.Update,s),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}j(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(s,t),Object.defineProperty(s.prototype,"startFrame",{get:function(){return this._startFrame},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"endFrame",{get:function(){return this.curAnimation.endFrames()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"totalFrame",{get:function(){return this.curAnimation.totalFrames()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"fps",{get:function(){return this.curAnimation.fps()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"frameNo",{get:function(){return Math.floor(this._currentFrame)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"loop",{get:function(){return this._loops},set:function(t){this._loops=t},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isPausing",{get:function(){return this._isPausing},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"animePackName",{get:function(){return this.curAnimePackName},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"animeName",{get:function(){return this.curAnimeName},enumerable:!1,configurable:!0}),s.prototype.Setup=function(t,e){this.clearCaches();for(var n=this.fbObj.animePacksLength(),i=0;i<n;i++)if(this.fbObj.animePacks(i).name()===t){var a=void 0,r=this.fbObj.animePacks(i).animationsLength();for(a=0;a<r;a++)if(this.fbObj.animePacks(i).animations(a).name()===e){this.animation=[i,a],this.curAnimePackName=t,this.curAnimeName=e,this.curAnimePackData=this.fbObj.animePacks(this.animation[0]),this.curAnimation=this.curAnimePackData.animations(this.animation[1]);break}for(var s=this.curAnimation.defaultDataLength(),o=0;o<s;o++){var b=this.curAnimation.defaultData(o);this.defaultFrameMap[b.index()]=b}this.parts=i;var c=this.fbObj.animePacks(this.parts).partsLength();for(this.parentIndex=new Array(c),this.prevCellID=new Array(c),this.prevMesh=new Array(c),this.substituteOverWrite=new Array(c),this.substituteKeyParam=new Array(c),a=0;a<c;a++){var d=this.fbObj.animePacks(this.parts).parts(a).index();this.parentIndex[d]=this.fbObj.animePacks(i).parts(a).parentIndex(),this.prevCellID[d]=-1,this.prevMesh[d]=null,this.substituteOverWrite[d]=null,this.substituteKeyParam[d]=null}}this.alphaBlendType=this.GetPartsBlendMode(),this._isPlaying=!1,this._isPausing=!0,this._startFrame=this.curAnimation.startFrames(),this._endFrame=this.curAnimation.endFrames(),this._currentFrame=this.curAnimation.startFrames(),this.nextFrameTime=0,this._loops=-1,this.skipEnabled=!0,this.updateInterval=1e3/this.curAnimation.fps(),this.playDirection=1,this.onUserDataCallback=null,this.playEndCallback=null,this.parentAlpha=1},s.prototype.clearCaches=function(){this.prio2index=[],this.userData=[],this.frameDataCache=[],this.currentCachedFrameNumber=-1,this.liveFrame=[],this.colorMatrixFilterCache=[],this.defaultFrameMap=[]},s.prototype.Update=function(t){this.UpdateInternal(t)},s.prototype.UpdateInternal=function(t,e){void 0===e&&(e=!0);var n=i.Ticker.shared.elapsedMS;if(this._isPlaying&&!this._isPausing&&0!==this.updateInterval){if(this.nextFrameTime+=n,this.nextFrameTime>=this.updateInterval){var a=!1,r=this.nextFrameTime/this.updateInterval;this.nextFrameTime-=this.updateInterval*r;var s=this.skipEnabled?r*this.playDirection:this.playDirection,o=this._currentFrame+s,b=Math.floor(o),c=o-b,d=Math.floor(this._currentFrame);if(this.playDirection>=1)for(var l=b-d;l;l--){var h=d+1;if(h>this._endFrame)if(-1===this._loops)h=this._startFrame;else{if(this._loops--,a=!0,0===this._loops){this._isPlaying=!1,h=e?this._startFrame:this._endFrame;break}h=this._startFrame}d=h,this._isPlaying&&this.HaveUserData(d)&&null!==this.onUserDataCallback&&this.onUserDataCallback(this.GetUserData(d))}if(this.playDirection<=-1)for(l=d-b;l;l--){var f=d-1;if(f<this._startFrame)if(-1===this._loops)f=this._endFrame;else{if(this._loops--,a=!0,0===this._loops){this._isPlaying=!1,f=e?this._endFrame:this._startFrame;break}f=this._endFrame}d=f,this._isPlaying&&this.HaveUserData(d)&&null!==this.onUserDataCallback&&this.onUserDataCallback(this.GetUserData(d))}this._currentFrame=d+c,a&&null!==this.playEndCallback&&this.playEndCallback(this),this.SetFrameAnimation(Math.floor(this._currentFrame),r)}}else this.SetFrameAnimation(Math.floor(this._currentFrame))},s.prototype.SetAnimationFramerate=function(t,e){void 0===e&&(e=!0),t<=0||(this.updateInterval=1e3/t,this.skipEnabled=e)},s.prototype.SetAnimationSpeed=function(t,e){void 0===e&&(e=!0),0!==t&&(this.playDirection=t>0?1:-1,this.updateInterval=1e3/(this.curAnimation.fps()*t*this.playDirection),this.skipEnabled=e)},s.prototype.SetAnimationSection=function(t,e,n){void 0===t&&(t=-1),void 0===e&&(e=-1),void 0===n&&(n=-1),t>=0&&t<this.curAnimation.totalFrames()&&(this._startFrame=t),e>=0&&e<this.curAnimation.totalFrames()&&(this._endFrame=e),this._loops=n>0?n:-1,this._currentFrame=this.playDirection>0?this._startFrame:this._endFrame},s.prototype.Play=function(t){this._isPlaying=!0,this._isPausing=!1;var e=this.playDirection>0?this._startFrame:this._endFrame;t&&"number"==typeof t&&(e=t),this._currentFrame=e,this.resetLiveFrame();var n=Math.floor(this._currentFrame);this.SetFrameAnimation(n),this.HaveUserData(n)&&null!==this.onUserDataCallback&&this.onUserDataCallback(this.GetUserData(n))},s.prototype.Pause=function(){this._isPausing=!0},s.prototype.Resume=function(){this._isPausing=!1},s.prototype.Stop=function(){this._isPlaying=!1},s.prototype.SetFrame=function(t){this._currentFrame=t},s.prototype.NextFrame=function(){var t=Math.floor(this._currentFrame);t!==this.endFrame&&this.SetFrame(t+1)},s.prototype.PrevFrame=function(){var t=Math.floor(this._currentFrame);0!==t&&this.SetFrame(t-1)},s.prototype.SetAlpha=function(t){this.parentAlpha=t},s.prototype.ThrowError=function(t){},s.prototype.SetUserDataCalback=function(t){this.onUserDataCallback=t},s.prototype.SetPlayEndCallback=function(t){this.playEndCallback=t},s.prototype.HaveUserData=function(t){if(-1===this.userData[t])return!1;if(this.userData[t])return!0;for(var e=0;e<this.curAnimation.userDataLength();e++)if(t===this.curAnimation.userData(e).frameIndex())return this.userData[t]=this.curAnimation.userData(e),!0;return this.userData[t]=-1,!1},s.prototype.GetUserData=function(t){if(!1!==this.HaveUserData(t)){for(var e=this.userData[t],n=e.dataLength(),i=0,a=[],r=0;r<n;r++){var s=e.data(r).flags(),o=e.data(r).arrayIndex(),b=null,c=null,d=null,l=null,h=null,f=null,u=null,p=null,_=null;1&s&&(b=e.data(r).data(i,new k).integer(),i++),2&s&&(c=e.data(r).data(i,new U).x(),d=e.data(r).data(i,new U).y(),l=e.data(r).data(i,new U).w(),h=e.data(r).data(i,new U).h(),i++),4&s&&(f=e.data(r).data(i,new R).x(),u=e.data(r).data(i,new R).y(),i++),8&s&&(p=e.data(r).data(i,new Y).length(),_=e.data(r).data(i,new Y).data(),i++),a.push([o,s,b,c,d,l,h,f,u,p,_])}return a}},s.prototype.GetPartsBlendMode=function(){for(var t=this.fbObj.animePacks(this.parts).partsLength(),e=[],n=this.fbObj.animePacks(this.parts),i=0;i<t;i++)e.push(n.parts(i).alphaBlendType());return e},s.prototype.I2F=function(t){return this._uint32[0]=t,this._float32[0]},s.prototype.GetFrameData=function(t){if(this.currentCachedFrameNumber===t&&this.frameDataCache)return this.frameDataCache;var e=this.curAnimation.defaultDataLength(),n=new Array(e);this.prio2index=new Array(e);for(var i=this.curAnimation.frameData(t),a=0;a<e;a++){var r=i.states(a),s=r.index(),o=r.flag1(),b=r.flag2(),c=-1,d=this.GetDefaultDataByIndex(s);d.flag1=o,d.flag2=b;var l=0;if(o&A.INVISIBLE&&(d.f_hide=!0),o&A.FLIP_H&&(d.f_flipH=!0),o&A.FLIP_V&&(d.f_flipV=!0),o&A.CELL_INDEX&&(d.cellIndex=r.data(l++)),o&A.POSITION_X&&(d.positionX=this.I2F(r.data(l++))),o&A.POSITION_Y&&(d.positionY=this.I2F(r.data(l++))),o&A.POSITION_Z&&l++,o&A.PIVOT_X&&(d.pivotX=this.I2F(r.data(l++))),o&A.PIVOT_Y&&(d.pivotY=this.I2F(r.data(l++))),o&A.ROTATIONX&&l++,o&A.ROTATIONY&&l++,o&A.ROTATIONZ&&(d.rotationZ=this.I2F(r.data(l++))),o&A.SCALE_X&&(d.scaleX=this.I2F(r.data(l++))),o&A.SCALE_Y&&(d.scaleY=this.I2F(r.data(l++))),o&A.LOCALSCALE_X&&(d.localscaleX=this.I2F(r.data(l++))),o&A.LOCALSCALE_Y&&(d.localscaleY=this.I2F(r.data(l++))),o&A.OPACITY&&(d.opacity=r.data(l++)),o&A.LOCALOPACITY&&(d.localopacity=r.data(l++)),o&A.SIZE_X&&(d.size_X=this.I2F(r.data(l++))),o&A.SIZE_Y&&(d.size_Y=this.I2F(r.data(l++))),o&A.U_MOVE&&(d.uv_move_X=this.I2F(r.data(l++))),o&A.V_MOVE&&(d.uv_move_Y=this.I2F(r.data(l++))),o&A.UV_ROTATION&&(d.uv_rotation=this.I2F(r.data(l++))),o&A.U_SCALE&&(d.uv_scale_X=this.I2F(r.data(l++))),o&A.V_SCALE&&(d.uv_scale_Y=this.I2F(r.data(l++))),o&A.BOUNDINGRADIUS&&l++,o&A.MASK&&(d.masklimen=r.data(l++)),o&A.PRIORITY&&(d.priority=r.data(l++)),o&A.INSTANCE_KEYFRAME&&(d.instanceValue_curKeyframe=r.data(l++),d.instanceValue_startFrame=r.data(l++),d.instanceValue_endFrame=r.data(l++),d.instanceValue_loopNum=r.data(l++),d.instanceValue_speed=this.I2F(r.data(l++)),d.instanceValue_loopflag=r.data(l++)),o&A.EFFECT_KEYFRAME&&(d.effectValue_curKeyframe=r.data(l++),d.effectValue_startTime=r.data(l++),d.effectValue_speed=this.I2F(r.data(l++)),d.effectValue_loopflag=r.data(l++)),o&A.VERTEX_TRANSFORM)d.f_mesh=!0,1&(h=d.i_transformVerts=r.data(l++))&&(d.u00=this.I2F(r.data(l++)),d.v00=this.I2F(r.data(l++))),2&h&&(d.u01=this.I2F(r.data(l++)),d.v01=this.I2F(r.data(l++))),4&h&&(d.u10=this.I2F(r.data(l++)),d.v10=this.I2F(r.data(l++))),8&h&&(d.u11=this.I2F(r.data(l++)),d.v11=this.I2F(r.data(l++)));if(o&A.PARTS_COLOR){var h;if(c=255&(h=r.data(l++)),d.useColorMatrix=1!==c,4096&h){var f=this.I2F(r.data(l++)),u=r.data(l++)<<16|r.data(l++);d.partsColorARGB=u>>>0,1===c?d.tint=16777215&u:d.colorMatrix=this.GetColorMatrixFilter(c,f,u)}2048&h&&(l++,l++,l++,d.colorMatrix=this.defaultColorFilter),1024&h&&(l++,l++,l++,d.colorMatrix=this.defaultColorFilter),512&h&&(l++,l++,l++,d.colorMatrix=this.defaultColorFilter),256&h&&(l++,l++,l++,d.colorMatrix=this.defaultColorFilter)}if(b&D.MESHDATA){d.meshIsBind=this.curAnimation.meshsDataUV(s).uv(0),d.meshNum=this.curAnimation.meshsDataUV(s).uv(1);for(var p=new Float32Array(3*d.meshNum),_=0;_<d.meshNum;_++){var m=this.I2F(r.data(l++)),y=this.I2F(r.data(l++)),v=this.I2F(r.data(l++));p[3*_+0]=m,p[3*_+1]=y,p[3*_+2]=v}d.meshDataPoint=p}n[s]=d,this.prio2index[a]=s,0===this.fbObj.animePacks(this.parts).parts(s).type()&&(n[s].cellIndex=-2)}return this.frameDataCache=n,this.currentCachedFrameNumber=t,n},s.prototype.GetColorMatrixFilter=function(t,e,n){var i=t.toString()+"_"+e.toString()+"_"+n.toString();if(this.colorMatrixFilterCache[i])return this.colorMatrixFilterCache[i];var r=new a.ColorMatrixFilter,s=((4278190080&n)>>>24)/255,o=((16711680&n)>>>16)/255,b=((65280&n)>>>8)/255,c=(255&n)/255;if(0===t){var d=1-e;r.matrix=[d,0,0,0,o*e,0,d,0,0,b*e,0,0,d,0,c*e,0,0,0,1,0]}else 1===t?r.matrix=[o,0,0,0,0,0,b,0,0,0,0,0,c,0,0,0,0,0,s,0]:2===t?r.matrix=[1,0,0,0,o,0,1,0,0,b,0,0,1,0,c,0,0,0,s,0]:3===t&&(r.matrix=[1,0,0,0,-o,0,1,0,0,-b,0,0,1,0,-c,0,0,0,s,0]);return this.colorMatrixFilterCache[i]=r,r},s.prototype.GetDefaultDataByIndex=function(t){var e=this.defaultFrameMap[t];return{index:e.index(),lowflag:e.lowflag(),highflag:e.highflag(),priority:e.priority(),cellIndex:e.cellIndex(),opacity:e.opacity(),localopacity:e.localopacity(),masklimen:e.masklimen(),positionX:e.positionX(),positionY:e.positionY(),pivotX:e.pivotX(),pivotY:e.pivotY(),rotationX:e.rotationX(),rotationY:e.rotationY(),rotationZ:e.rotationZ(),scaleX:e.scaleX(),scaleY:e.scaleY(),localscaleX:e.localscaleX(),localscaleY:e.localscaleY(),size_X:e.sizeX(),size_Y:e.sizeY(),uv_move_X:e.uvMoveX(),uv_move_Y:e.uvMoveY(),uv_rotation:e.uvRotation(),uv_scale_X:e.uvScaleX(),uv_scale_Y:e.uvScaleY(),boundingRadius:e.boundingRadius(),instanceValue_curKeyframe:e.instanceValueCurKeyframe(),instanceValue_endFrame:e.instanceValueEndFrame(),instanceValue_startFrame:e.instanceValueStartFrame(),instanceValue_loopNum:e.instanceValueLoopNum(),instanceValue_speed:e.instanceValueSpeed(),instanceValue_loopflag:e.instanceValueLoopflag(),effectValue_curKeyframe:e.effectValueCurKeyframe(),effectValue_startTime:e.effectValueStartTime(),effectValue_speed:e.effectValueSpeed(),effectValue_loopflag:e.effectValueLoopflag(),f_hide:!1,f_flipH:!1,f_flipV:!1,f_mesh:!1,i_transformVerts:0,u00:0,v00:0,u01:0,v01:0,u10:0,v10:0,u11:0,v11:0,useColorMatrix:!1,colorMatrix:null,meshIsBind:0,meshNum:0,meshDataPoint:0,flag1:0,flag2:0,partsColorARGB:0}},s.prototype.SetFrameAnimation=function(t,n){void 0===n&&(n=0);var i=this.GetFrameData(t);this.removeChildren();for(var a=i.length,o=0;o<a;o=o+1|0){var b=this.prio2index[o],c=i[b],d=c.cellIndex,l=this.prevMesh[b],h=this.fbObj.animePacks(this.parts).parts(b),f=h.type(),u=null!==this.substituteOverWrite[b]&&this.substituteOverWrite[b],_=this.substituteKeyParam[b];switch(f){case p.Instance:null==l&&((l=this.MakeCellPlayer(h.refname())).name=h.name());break;case p.Normal:case p.Mask:d>=0&&this.prevCellID[b]!==d&&(null!=l&&l.destroy(),(l=this.MakeCellMesh(d)).name=h.name());break;case p.Mesh:d>=0&&this.prevCellID[b]!==d&&(null!=l&&l.destroy(),(l=this.MakeMeshCellMesh(b,d)).name=h.name());break;case p.Nulltype:case p.Joint:this.prevCellID[b]!==d&&(null!=l&&l.destroy(),(l=new e.Container).name=h.name());break;default:d>=0&&this.prevCellID[b]!==d&&(null!=l&&l.destroy(),(l=this.MakeCellMesh(d)).name=h.name())}if(null!=l)switch(this.prevCellID[b]=d,this.prevMesh[b]=l,f){case p.Instance:var m=new Float32Array(5);m[0]=0,m[1]=0,m[2]=1,m[3]=1,m[4]=0;var y=(m=this.TransformPositionLocal(m,c.index,t))[4]*Math.PI/180;l.rotation=y,l.position.set(m[0],m[1]),l.scale.set(m[2],m[3]);var v=c.opacity/255;c.localopacity<255&&(v=c.localopacity/255),l.SetAlpha(v*this.parentAlpha),l.visible=!c.f_hide;var I=c.instanceValue_curKeyframe,S=c.instanceValue_startFrame,F=c.instanceValue_endFrame,P=c.instanceValue_speed,g=c.instanceValue_loopNum,E=!1,D=!1,V=!1,O=!1,M=c.instanceValue_loopflag;1&M&&(E=!0),2&M&&(D=!0),4&M&&(V=!0),8&M&&(O=!0),u&&(S=_.refStartframe,F=_.refEndframe,P=_.refSpeed,g=_.refloopNum,E=_.infinity,D=_.reverse,V=_.pingpong,O=_.independent);var C=t;!0===O&&(this.liveFrame[o]+=n,C=Math.floor(this.liveFrame[o]));var L=I,w=Math.floor((C-L)*P);if(w<0)continue;if(L>C)continue;var T=F-S+1;if(T<=0)continue;var N=Math.floor(w/T),x=g;V&&(x*=2),E||N>=x&&(w=T-1,N=x-1);var k=Math.floor(w%T),R=0;V&&N%2==1&&(D=!D),this.playDirection<=-1&&(D=!D),R=D?F-k:k+S,l.SetFrame(Math.floor(R)),this.addChild(l);break;case p.Normal:case p.Mesh:case p.Joint:case p.Mask:var U=this.fbObj.cells(d),Y=void 0;if(Y=f===p.Mesh?0===c.meshIsBind?this.TransformMeshVertsLocal(s.GetMeshVerts(U,c),c.index,t):s.GetMeshVerts(U,c):this.TransformVertsLocal(s.GetVerts(U,c),c.index,t),c.flag1&A.VERTEX_TRANSFORM){var X=Y[6],j=Y[7],B=Y[2],z=Y[3],G=Y[8],Z=Y[9],K=Y[4],W=Y[5],H=.5*(X+G),$=.5*(j+Z),J=.5*(X+B),q=.5*(j+z),Q=.5*(B+K),tt=.5*(z+W),et=.5*(G+K),nt=.5*(Z+W),it=s.CoordinateGetDiagonalIntersection(Y[0],Y[1],H,$,et,nt,J,q,Q,tt);Y[0]=it[0],Y[1]=it[1]}for(var at=Y[0],rt=Y[1],st=0;st<Y.length/2;st++)Y[2*st]-=at,Y[2*st+1]-=rt;if(l.vertices=Y,c.flag1&A.U_MOVE||c.flag1&A.V_MOVE||c.flag1&A.U_SCALE||c.flag1&A.V_SCALE||c.flag1&A.UV_ROTATION){var ot=U.u1()+c.uv_move_X,bt=U.u2()+c.uv_move_X,ct=U.v1()+c.uv_move_Y,dt=U.v2()+c.uv_move_Y,lt=(bt+ot)/2,ht=(dt+ct)/2,ft=(bt-ot)/2*c.uv_scale_X,ut=(dt-ct)/2*c.uv_scale_Y;if(l.uvs[0]=lt,l.uvs[1]=ht,l.uvs[2]=lt-ft,l.uvs[3]=ht-ut,l.uvs[4]=lt+ft,l.uvs[5]=ht-ut,l.uvs[6]=lt-ft,l.uvs[7]=ht+ut,l.uvs[8]=lt+ft,l.uvs[9]=ht+ut,c.flag1&A.UV_ROTATION){y=c.uv_rotation*Math.PI/180;for(var pt=0;pt<5;pt++){var _t=l.uvs[2*pt+0]-lt,mt=l.uvs[2*pt+1]-ht,yt=Math.cos(y),vt=Math.sin(y),It=yt*_t-vt*mt,St=vt*_t+yt*mt;l.uvs[2*pt+0]=lt+It,l.uvs[2*pt+1]=ht+St}}l.dirty++}l.position.set(at,rt);v=c.opacity/255;if(c.localopacity<255&&(v=c.localopacity/255),l.alpha=v*this.parentAlpha,l.visible=!c.f_hide,c.useColorMatrix&&(l.filters=[c.colorMatrix]),c.tint){l.tint=c.tint;var Ft=((4278190080&c.partsColorARGB)>>>24)/255;l.alpha=l.alpha*Ft}c.tintRgb&&(l.tintRgb=c.tintRgb);var Pt=this.alphaBlendType[b];0===Pt&&(l.blendMode=r.BLEND_MODES.NORMAL),1===Pt&&(l.blendMode=r.BLEND_MODES.MULTIPLY,l.alpha=1),2===Pt&&(l.blendMode=r.BLEND_MODES.ADD),3===Pt&&(l.blendMode=r.BLEND_MODES.NORMAL),4===Pt&&(l.blendMode=r.BLEND_MODES.MULTIPLY),5===Pt&&(l.blendMode=r.BLEND_MODES.SCREEN,l.alpha=1),6===Pt&&(l.blendMode=r.BLEND_MODES.EXCLUSION),7===Pt&&(l.blendMode=r.BLEND_MODES.NORMAL),f!==p.Mask&&this.addChild(l);break;case p.Nulltype:v=this.InheritOpacity(1,c.index,t);l.alpha=v*c.localopacity/255;at=(Y=this.TransformVerts(s.GetDummyVerts(),c.index,t))[0],rt=Y[1];l.position.set(at,rt);var gt=Math.atan2(Y[5]-Y[3],Y[4]-Y[2]),Et=Math.atan2(Y[7]-Y[3],Y[6]-Y[2]);l.rotation=gt,l.skew.x=Et-gt-Math.PI/2}}},s.prototype.ChangeInstanceAnime=function(t,e,n,i,a){void 0===a&&(a=null);var r=!1;if(null!==this.curAnimePackName&&null!==this.curAnimation)for(var o=this.curAnimePackData,b=o.partsLength(),c=0;c<b;c++){var d=o.parts(c);if(d.name()===t){var l=this.prevMesh[c];if(null===l||l instanceof s){if((l=this.MakeCellPlayer(e+"/"+n)).name=d.name(),this.prevMesh[c]=l,this.substituteOverWrite[c]=i,null===a){var h=new B;h.refStartframe=l.startFrame,h.refEndframe=l.endFrame,this.substituteKeyParam[c]=h}else this.substituteKeyParam[c]=a;r=!0;break}}}return r},s.prototype.InheritOpacity=function(t,e,n){return t=this.GetFrameData(n)[e].opacity/255,this.parentIndex[e]>=0&&(t=this.InheritOpacity(t,this.parentIndex[e],n)),t},s.prototype.TransformVertsLocal=function(t,e,n){for(var i=this.GetFrameData(n)[e],a=-i.rotationZ*Math.PI/180,r=Math.cos(a),s=Math.sin(a),o=0;o<t.length/2;o++){var b=t[2*o],c=t[2*o+1];1&i.i_transformVerts&&1===o&&(b+=i.u00,c-=i.v00),2&i.i_transformVerts&&2===o&&(b+=i.u01,c-=i.v01),4&i.i_transformVerts&&3===o&&(b+=i.u10,c-=i.v10),8&i.i_transformVerts&&4===o&&(b+=i.u11,c-=i.v11),b*=i.scaleX*i.localscaleX,c*=i.scaleY*i.localscaleY,t[2*o]=r*b-s*c+i.positionX,t[2*o+1]=s*b+r*c-i.positionY,i.f_flipH&&(t[2*o]=2*t[0]-t[2*o]),i.f_flipV&&(t[2*o+1]=2*t[1]-t[2*o+1])}return this.parentIndex[e]>=0&&(t=this.TransformVerts(t,this.parentIndex[e],n)),t},s.prototype.TransformMeshVertsLocal=function(t,e,n){for(var i=this.GetFrameData(n)[e],a=-i.rotationZ*Math.PI/180,r=Math.cos(a),s=Math.sin(a),o=0;o<t.length/2;o++){var b=t[2*o],c=t[2*o+1];b*=i.scaleX*i.localscaleX,c*=i.scaleY*i.localscaleY,t[2*o]=r*b-s*c+i.positionX,t[2*o+1]=s*b+r*c-i.positionY}return this.parentIndex[e]>=0&&(t=this.TransformVerts(t,this.parentIndex[e],n)),t},s.prototype.TransformPositionLocal=function(t,e,n){var i=this.GetFrameData(n)[e];t[4]+=-i.rotationZ;var a=-i.rotationZ*Math.PI/180,r=Math.cos(a),s=Math.sin(a),o=t[0],b=t[1];return t[2]*=i.scaleX*i.localscaleX,t[3]*=i.scaleY*i.localscaleY,t[0]=r*o-s*b+i.positionX,t[1]=s*o+r*b-i.positionY,this.parentIndex[e]>=0&&(t=this.TransformPosition(t,this.parentIndex[e],n)),t},s.CoordinateGetDiagonalIntersection=function(t,e,n,i,a,r,s,o,b,c){var d=new Float32Array([t,e]),l=(b-n)*(o-r)-(c-i)*(s-a);if(l<=0&&l>=0)return d;var h=((o-r)*(s-n)-(s-a)*(o-i))/l,f=((b-n)*(o-i)-(c-i)*(s-n))/l;return 0<=h&&1>=h&&0<=f&&1>=f&&(t=n+h*(b-n),e=i+h*(c-i)),d[0]=t,d[1]=e,d},s.prototype.TransformVerts=function(t,e,n){for(var i=this.GetFrameData(n)[e],a=-i.rotationZ*Math.PI/180,r=Math.cos(a),s=Math.sin(a),o=0;o<t.length/2;o++){var b=t[2*o],c=t[2*o+1];b*=i.scaleX,c*=i.scaleY,t[2*o]=r*b-s*c+i.positionX,t[2*o+1]=s*b+r*c-i.positionY,i.f_flipH&&(t[2*o]=2*t[0]-t[2*o]),i.f_flipV&&(t[2*o+1]=2*t[1]-t[2*o+1])}return this.parentIndex[e]>=0&&(t=this.TransformVerts(t,this.parentIndex[e],n)),t},s.prototype.TransformPosition=function(t,e,n){var i=this.GetFrameData(n)[e];t[4]+=-i.rotationZ;var a=-i.rotationZ*Math.PI/180,r=Math.cos(a),s=Math.sin(a),o=t[0],b=t[1];return t[2]*=i.scaleX,t[3]*=i.scaleY,t[0]=r*o-s*b+i.positionX,t[1]=s*o+r*b-i.positionY,this.parentIndex[e]>=0&&(t=this.TransformPosition(t,this.parentIndex[e],n)),t},s.prototype.MakeCellMesh=function(t){var e=this.fbObj.cells(t),i=e.u1(),a=e.u2(),s=e.v1(),o=e.v2(),b=e.width()/2,c=e.height()/2,d=new Float32Array([0,0,-b,-c,b,-c,-b,c,b,c]),l=new Float32Array([(i+a)/2,(s+o)/2,i,s,a,s,i,o,a,o]),h=new Uint16Array([0,1,2,0,2,4,0,4,3,0,1,3]);return new n.SimpleMesh(this.resources[e.cellMap().name()].texture,d,l,h,r.DRAW_MODES.TRIANGLES)},s.prototype.MakeMeshCellMesh=function(t,e){var i=this.curAnimation.meshsDataUV(t),a=i.uvLength();if(a>0){for(var s=new Float32Array(a-2),o=i.uv(1),b=2;b<a;b++)s[b-2]=i.uv(b);var c=this.curAnimation.meshsDataIndices(t),d=c.indicesLength(),l=new Uint16Array(d-1);for(b=1;b<d;b++)l[b-1]=c.indices(b);var h=new Float32Array(2*o);return new n.SimpleMesh(this.resources[this.fbObj.cells(e).cellMap().name()].texture,h,s,l,r.DRAW_MODES.TRIANGLES)}return null},s.prototype.MakeCellPlayer=function(t){var e=t.split("/"),n=new s(this.ss6project);return n.Setup(e[0],e[1]),n.Play(),n},s.GetVerts=function(t,e){var n=e.size_X/2,i=e.size_Y/2,a=e.size_X*-(e.pivotX+t.pivotX()),r=e.size_Y*(e.pivotY+t.pivotY());return new Float32Array([a,r,a-n,r-i,a+n,r-i,a-n,r+i,a+n,r+i])},s.GetMeshVerts=function(t,e){for(var n=new Float32Array(2*e.meshNum),i=0;i<e.meshNum;i++)n[2*i+0]=e.meshDataPoint[3*i+0],n[2*i+1]=-e.meshDataPoint[3*i+1];return n},s.GetDummyVerts=function(){return new Float32Array([0,0,-.5,-.5,.5,-.5,-.5,.5,.5,.5])},s.prototype.resetLiveFrame=function(){for(var t=this.curAnimation.defaultDataLength(),e=0;e<t;e++)this.liveFrame[e]=0},s}(e.Container);class G{static instance;pluginParameters;animationDir;replaceSVActorSpriteFlag;svActorDir;svActorAnimationPack;svActorHideWeaponGraphics;replaceSVEnemySpriteFlag;svEnemyDir;svEnemyAnimationPack;svEnemyAnimationName;constructor(){this.pluginParameters=PluginManager.parameters("ss6player-rpgmakermz"),this.animationDir=String(this.pluginParameters.animationDir||"img/ssfb")+"/",this.replaceSVActorSpriteFlag="true"===this.pluginParameters.replaceSVActorSpriteFlag||!1,this.svActorDir=String(this.pluginParameters.svActorDir||"img/ssfb/sv_actors")+"/",this.svActorAnimationPack=String(this.pluginParameters.svActorAnimationPack||"motions"),this.svActorHideWeaponGraphics="true"===this.pluginParameters.svActorHideWeaponGraphics||!1,this.replaceSVEnemySpriteFlag="true"===this.pluginParameters.replaceSVEnemySpriteFlag||!1,this.svEnemyDir=String(this.pluginParameters.svEnemyDir||"img/ssfb/sv_enemies")+"/",this.svEnemyAnimationPack=String(this.pluginParameters.svEnemyAnimationPack||"motions"),this.svEnemyAnimationName=String(this.pluginParameters.svEnemyAnimationName||"walk")}static getInstance(){return G.instance||(G.instance=new G),G.instance}}class Z{static instance;ssprojectMap;_isLoading;constructor(){this.clear(),this._isLoading=!1}prepare(t){this.ssprojectMap.set(t,null),this._isLoading=!0}isLoading(){return this._isLoading}isExist(t){return this.ssprojectMap.has(t)&&null!==this.ssprojectMap.get(t)}set(t,e){this.ssprojectMap.set(t,e),this._isLoading=!1}get(t){return this.ssprojectMap.has(t)?this.ssprojectMap.get(t):null}clear(){this.ssprojectMap=new Map}static getInstance(){return Z.instance||(Z.instance=new Z),Z.instance}}const K="ss6player-rpgmakermz",W="ss6projectLoadWait",H="ss6playerPlayWaitMode";let $=!1,J=null,q=null,Q=null;PluginManager.registerCommand(K,"loadSsfb",(function(t){const e=Number(t.ssfbId),n=t.ssfbFile,i=G.getInstance().animationDir+n;if(Z.getInstance().isExist(e)){if(i===Z.getInstance().get(e).ssfbPath)return}this.setWaitMode(W),Z.getInstance().prepare(e);let a=new X(i,(()=>{Z.getInstance().set(e,a)}),18e4,3,((t,e,n,i)=>{throw this.setWaitMode(""),i}),((t,e,n,i)=>{throw console.log("timeout download ssfb file: "+t),this.setWaitMode(""),i}),null)})),PluginManager.registerCommand(K,"setAsPicture",(function(t){const e=Number(t.ssfbId),n=t.animePackName,i=t.animeName,a=Number(t.scaleX)||1,r=Number(t.scaleY)||1,s=Number(t.loop)||1;let o=Z.getInstance().get(e);if(null===o){const t="not found ssfbId: "+e;throw console.error(t),t}let b=new z(o,n,i);b.scale=new PIXI.Point(a,r),b.loop=s,J=b})),PluginManager.registerCommand(K,"waitForPicture",(function(t){const e=Number(t.pictureId)||1,n=$gameScreen.picture(e);if(n&&n.mzkpSS6Player){if(n.mzkpSS6Player instanceof z){-1!==n.mzkpSS6Player.loop?(this.setWaitMode(H),$=!0,q=function(t){0===t.loop&&($=!1)}):console.warn("pictureId: "+e+" can not wait SS6Player because setting infinity loop.")}}else console.warn("pictureId: "+e+" not have SS6Player")}));const tt=Game_Interpreter.prototype.updateWaitMode;Game_Interpreter.prototype.updateWaitMode=function(){let t=!1;return t=this._waitMode===W?Z.getInstance().isLoading():this._waitMode===H?$:tt.call(this),t};const et=Game_Picture.prototype.show;Game_Picture.prototype.show=function(){et.apply(this,arguments),""===this._name&&null!==J&&(this.mzkpSS6Player=J,this.mzkpSS6PlayerChanged=!0,J=null)};const nt=Sprite_Picture.prototype.destroy;Sprite_Picture.prototype.destroy=function(t){null!==this.mzkpSS6Player&&this.mzkpSS6Player instanceof z&&(this.mzkpSS6Player.Stop(),this.picture().mzkpSS6PlayerPrevFrameNo=this.mzkpSS6Player.frameNo,this.removeChild(this.mzkpSS6Player),this.mzkpSS6Player=null),nt.call(this,t)};const it=Scene_Base.prototype.terminate;Scene_Base.prototype.terminate=function(){$gameActors._data.forEach(((t,e,n)=>{t&&t._svActorSS6Player&&(t._svActorSS6Player.Stop(),t._svActorSS6PlayerParent.removeChild(t._svActorSS6Player),t._svActorSS6Player=null,t._svActorSS6PlayerParent=null)})),$gameTroop.members().forEach(((t,e,n)=>{t&&t._svEnemySS6Player&&(t._svEnemySS6Player.Stop(),t._svEnemySS6PlayerParent.removeChild(t._svEnemySS6Player),t._svEnemySS6ProjectLoaded=!1,t._svEnemySS6Player=null,t._svEnemySS6PlayerParent=null)})),it.apply(this,arguments)};const at=Sprite_Picture.prototype.updateBitmap;Sprite_Picture.prototype.updateBitmap=function(){if(at.apply(this,arguments),this.visible&&""===this._pictureName){const t=this.picture(),e=t&&t.mzkpSS6Player||null,n=t&&t.mzkpSS6PlayerChanged;if(this.mzkpSS6Player!==e||n)if(null!==e){if(0===e.loop)return void(this.mzkpSS6Player=null);const n=q,i=Q,a=this;e.SetPlayEndCallback((()=>{null!==n&&n(e),0===e.loop&&(e.Stop(),a.removeChild(e)),null!==i&&i(e)})),this.mzkpSS6Player=e,this.addChild(this.mzkpSS6Player),this.mzkpSS6Player.Play(t.mzkpSS6PlayerPrevFrameNo),t.mzkpSS6PlayerChanged=!1,q=null,Q=null}else this.mzkpSS6Player=null}else null!==this.mzkpSS6Player&&this.mzkpSS6Player instanceof z&&(this.mzkpSS6Player.Stop(),this.removeChild(this.mzkpSS6Player)),this.mzkpSS6Player=null};const rt=Game_Screen.prototype.clear;Game_Screen.prototype.clear=function(){Z.getInstance().clear(),rt.call(this)};let st=!1;const ot=SceneManager.updateScene;SceneManager.updateScene=function(){ot.apply(this,arguments),this._scene&&(this.isGameActive()?st&&($gameScreen._pictures.forEach(((t,e,n)=>{t&&t.mzkpSS6Player&&t.mzkpSS6Player.Resume()})),$gameActors._data.forEach(((t,e,n)=>{t&&t._svActorSS6Player&&t._svActorSS6Player.Resume()})),$gameTroop.members().forEach(((t,e,n)=>{t&&t._svEnemySS6Player&&t._svEnemySS6Player.Resume()})),st=!1):($gameScreen&&$gameScreen._pictures&&$gameScreen._pictures.forEach(((t,e,n)=>{t&&t.mzkpSS6Player&&t.mzkpSS6Player.Pause()})),$gameActors&&$gameActors._data&&$gameActors._data.forEach(((t,e,n)=>{t&&t._svActorSS6Player&&t._svActorSS6Player.Pause()})),$gameTroop&&$gameTroop.members()&&$gameTroop.members().forEach(((t,e,n)=>{t&&t._svEnemySS6Player&&t._svEnemySS6Player.Pause()})),st=!0))};let bt=!1;const ct=DataManager.isDatabaseLoaded;DataManager.isDatabaseLoaded=function(){return G.getInstance().replaceSVEnemySpriteFlag?!!ct.call(this)&&(bt||(this.loadEnemyNoteTags(),bt=!0),!0):ct.call(this)};DataManager.loadEnemyNoteTags=function(){const t=new RegExp("<SS6SVEnemy (.*):(.*)>","i");$dataEnemies.forEach(((e,n,i)=>{if(null===e)return;e.note.split(/\r?\n/).forEach(((n,i,a)=>{const r=t.exec(n);if(r&&3===r.length){const t=r[1].toLowerCase(),n=r[2];switch(t){case"file".toLowerCase():e._svEnemyFile=n;break;case"animationPackName".toLowerCase():e._svEnemyAnimationPackName=n;break;case"animationName".toLowerCase():e._svEnemyAnimationName=n;break;case"scaleX".toLowerCase():e._svEnemyScaleX=Number(n);break;case"scaleY".toLowerCase():e._svEnemyScaleY=Number(n);break;case"offsetX".toLowerCase():e._svEnemyOffsetX=Number(n);break;case"offsetY".toLowerCase():e._svEnemyOffsetY=Number(n)}}}))}))},Sprite_Actor.svActorSsfbId=function(t){return"sv_actor_"+t},Sprite_Actor.svActorSsfbDir=function(t){return G.getInstance().svActorDir+String(t)+"/"},Sprite_Actor.svActorSsfbPath=function(t){return Sprite_Actor.svActorSsfbDir(t)+String(t)+".ssbp.ssfb"};let dt=new Map;const lt=Sprite_Actor.prototype.setBattler;Sprite_Actor.prototype.setBattler=function(t){const e=t!==this._actor;if(lt.call(this,t),G.getInstance().replaceSVActorSpriteFlag&&e){const t=this._actor.actorId(),e=Sprite_Actor.svActorSsfbId(t);if(dt.has(e))return;let n=Sprite_Actor.svActorSsfbPath(t);if(Z.getInstance().isExist(e)){if(n===Z.getInstance().get(e).ssfbPath)return this._actor._svActorSS6Player=null,void(this._actor._svActorSS6PlayerParent=null)}Z.getInstance().prepare(e);let i=new X(n,(()=>{this._actor._svActorSS6Player=null,this._actor._svActorSS6PlayerParent=null,Z.getInstance().set(e,i)}),18e4,3,((t,n,i,a)=>{dt.set(e,null),Z.getInstance().set(e,null)}))}};const ht=Sprite_Actor.prototype.updateBitmap;Sprite_Actor.prototype.updateBitmap=function(){if(G.getInstance().replaceSVActorSpriteFlag){const t=this._actor.actorId(),e=Sprite_Actor.svActorSsfbId(t);Z.getInstance().isExist(e)&&void 0!==this._actor._svActorSS6Player?(Sprite_Battler.prototype.updateBitmap.call(this),this._mainSprite.bitmap=null,this.updateSS6Player()):ht.call(this)}else ht.call(this)},Sprite_Actor.prototype.updateSS6Player=function(){let t="";for(let e in Sprite_Actor.MOTIONS){const n=Sprite_Actor.MOTIONS[e];this._motion===n&&(t=e)}if(""===t&&(t="walk"),null===this._actor._svActorSS6Player||this._actor._svActorSS6Player.animeName!==t){this._actor._svActorSS6Player&&(this._mainSprite.removeChild(this._actor._svActorSS6Player),this._actor._svActorSS6Playe=null,this._actor._svActorSS6PlayerParent=null);const e=this._motion.loop,n=this._actor.actorId(),i=Sprite_Actor.svActorSsfbId(n),a=Z.getInstance().get(i),r=G.getInstance().svActorAnimationPack;this._actor._svActorSS6Player=new z(a,r,t),this._actor._svActorSS6Player.loop=e?-1:1,this._actor._svActorSS6Player.SetPlayEndCallback((t=>{0===t.loop&&this.refreshMotion()})),this._actor._svActorSS6Player.Play(),this._mainSprite.addChild(this._actor._svActorSS6Player),this._actor._svActorSS6PlayerParent=this._mainSprite}};const ft=Sprite_Actor.prototype.setupWeaponAnimation;Sprite_Actor.prototype.setupWeaponAnimation=function(){G.getInstance().replaceSVActorSpriteFlag&&G.getInstance().svActorHideWeaponGraphics?void 0===this._actor._svActorSS6Player&&ft.call(this):ft.call(this)},Sprite_Enemy.svEnemySsfbId=function(t){return"sv_enemy_"+t},Sprite_Enemy.svEnemySsfbDir=function(t){return G.getInstance().svEnemyDir+String(t)+"/"},Sprite_Enemy.svEnemySsfbPath=function(t){return Sprite_Enemy.svEnemySsfbDir(t)+String(t)+".ssbp.ssfb"};let ut=new Map;const pt=Sprite_Enemy.prototype.setBattler;Sprite_Enemy.prototype.setBattler=function(t){const e=t!==this._enemy;if(pt.call(this,t),G.getInstance().replaceSVEnemySpriteFlag&&e){const t=this._enemy.enemyId(),e=Sprite_Enemy.svEnemySsfbId(t);if(ut.has(e))return;let n=Sprite_Enemy.svEnemySsfbPath(t);const i=this._enemy.enemy();if(i._svEnemyFile&&(n=G.getInstance().animationDir+i._svEnemyFile),this._enemy._svEnemySS6ProjectLoaded=!1,Z.getInstance().isExist(e)){if(n===Z.getInstance().get(e).ssfbPath)return this._enemy._svEnemySS6ProjectLoaded=!0,this._enemy._svEnemySS6Player=null,void(this._enemy._svEnemySS6PlayerParent=null)}Z.getInstance().prepare(e);let a=new X(n,(()=>{this._enemy._svEnemySS6ProjectLoaded=!0,this._enemy._svEnemySS6Player=null,this._enemy._svEnemySS6PlayerParent=null,Z.getInstance().set(e,a)}),18e4,3,((t,n,i,a)=>{this._enemy._svEnemySS6ProjectLoaded=!0,ut.set(e,null),Z.getInstance().set(e,null)}))}};const _t=Sprite_Enemy.prototype.updateBitmap;Sprite_Enemy.prototype.updateBitmap=function(){if(G.getInstance().replaceSVEnemySpriteFlag){const t=this._enemy.enemyId(),e=Sprite_Enemy.svEnemySsfbId(t);if(!this._enemy._svEnemySS6ProjectLoaded)return;Z.getInstance().isExist(e)&&void 0!==this._enemy._svEnemySS6Player?(Sprite_Battler.prototype.updateBitmap.call(this),this.bitmap=null,this.updateSS6Player()):_t.call(this)}else _t.call(this)},Sprite_Enemy.prototype.updateSS6Player=function(){if(null===this._enemy._svEnemySS6Player){const t=this._enemy.enemyId(),e=Sprite_Enemy.svEnemySsfbId(t),n=Z.getInstance().get(e);let i=G.getInstance().svEnemyAnimationPack,a=G.getInstance().svEnemyAnimationName,r=1,s=1,o=0,b=0;const c=this._enemy.enemy();c._svEnemyAnimationPackName&&(i=c._svEnemyAnimationPackName),c._svEnemyAnimationName&&(a=c._svEnemyAnimationName),c._svEnemyScaleX&&(r=c._svEnemyScaleX),c._svEnemyScaleY&&(s=c._svEnemyScaleY),c._svEnemyOffsetX&&(o=c._svEnemyOffsetX),c._svEnemyOffsetY&&(b=c._svEnemyOffsetY),this._enemy._svEnemySS6Player=new z(n,i,a),this._enemy._svEnemySS6Player.loop=-1,this._enemy._svEnemySS6Player.SetPlayEndCallback((t=>{})),this._enemy._svEnemySS6Player.scale.x=r,this._enemy._svEnemySS6Player.scale.y=s,this._enemy._svEnemySS6Player.position.x+=o,this._enemy._svEnemySS6Player.position.y+=b,this._enemy._svEnemySS6Player.Play(),this.addChild(this._enemy._svEnemySS6Player),this._enemy._svEnemySS6PlayerParent=this}};const mt=Sprite_Enemy.prototype.updateFrame;Sprite_Enemy.prototype.updateFrame=function(){if(G.getInstance().replaceSVEnemySpriteFlag){const t=this._enemy.enemyId(),e=Sprite_Enemy.svEnemySsfbId(t);if(!this._enemy._svEnemySS6ProjectLoaded)return;if(Z.getInstance().isExist(e)&&void 0!==this._enemy._svEnemySS6Player){if(this.bitmap)return void mt.call(this);Sprite_Battler.prototype.updateFrame.call(this);const t=this._enemy._svEnemySS6Player;let e=0,n=0;t&&(e=t.width,n=t.height),"bossCollapse"===this._effectType?this.setFrame(0,0,e,this._effectDuration):this.setFrame(0,0,e,n)}else mt.call(this)}else mt.call(this)};const yt=Sprite_Enemy.prototype.updateStateSprite;Sprite_Enemy.prototype.updateStateSprite=function(){if(G.getInstance().replaceSVEnemySpriteFlag)if(this.bitmap)this._stateIconSprite.y=-Math.round(.9*(this.bitmap.height+40)),this._stateIconSprite.y<20-this.y&&(this._stateIconSprite.y=20-this.y);else{let t=0;this._enemy&&this._enemy._svEnemySS6Player&&(t=this._enemy._svEnemySS6Player),this._stateIconSprite.y=-Math.round(.9*(t+40)),this._stateIconSprite.y<20-this.y&&(this._stateIconSprite.y=20-this.y)}else yt.call(this)}}(PIXI,PIXI,PIXI,PIXI,PIXI.filters,PIXI);
