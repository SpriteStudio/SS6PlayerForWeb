/*:ja
 * @target MZ
 * @plugindesc SpriteStudio 6 アニメーション再生プラグイン
 * @version 0.6.1
 * @author Web Technology Corp.
 * @url https://github.com/SpriteStudio/SS6PlayerForWeb/tree/master/packages/ss6player-rpgmakermz
 * @help SS6Player for RPG Maker MZ
 *
 * 詳しい使い方は、GitHub リポジトリの README.md をお読みください。
 * https://github.com/SpriteStudio/SS6PlayerForWeb/tree/master/packages/ss6player-rpgmakermz/README.md
 *
 * デプロイメント時に「未使用ファイルを削除」オプションを使用した場合、
 * アニメーションを含むフォルダは削除されてしまいます。
 * 必ず、デプロイメント後にプラグインパラメータで指定したディレクトリを、
 * 出力先の同じ位置にコピーしてください。
 *
 * @param animationDir
 * @text ssfb アニメーションベースディレクトリ
 * @desc ssfb のフォルダを格納するベースディレクトリのパスです。
 * @type file
 * @default img/ssfb
 * @requiredAssets img/ssfb
 *
 * @param replaceSVActorSpriteFlag
 * @text SV アクター置き換え
 * @desc SV アクターを Sprite Studio アニメーションに置き換える機能の ON/OFF です。
 * @type boolean
 * @default false
 *
 * @param svActorDir
 * @text SV アクターディレクトリ
 * @desc SV アクターの SpriteStudio データを格納するディレクトリのパスです
 * @type file
 * @default img/ssfb/sv_actors
 * @requiredAssets img/ssfb/sv_actors
 *
 * @param svActorAnimationPack
 * @text SV アクターアニメーションパック名
 * @desc SV アクターが利用する Sprite Studio の共通アニメーションパック(ssae)名です
 * @type string
 * @default motions
 *
 * @param svActorHideWeaponGraphics
 * @text SV アクター武器非表示
 * @desc SV アクターの攻撃中の武器アニメーションを非表示にする機能の ON/OFF です。
 * @type boolean
 * @default true
 *
 * @param replaceSVEnemySpriteFlag
 * @text SV エネミー置き換え
 * @desc SV エネミーを Sprite Studio アニメーションに置き換える機能の ON/OFF です。
 * @type boolean
 * @default false
 *
 * @param svEnemyDir
 * @text SV エネミーディレクトリ
 * @desc SV アクターの SpriteStudio データを格納するディレクトリのパスです
 * @type file
 * @default img/ssfb/sv_enemies
 * @requiredAssets img/ssfb/sv_enemies
 *
 * @param svEnemyAnimationPack
 * @text SV エネミーアニメーションパック名
 * @desc SV エネミーが利用する Sprite Studio の共通アニメーションパック(ssae)名です
 * @type string
 * @default motions
 *
 * @param svEnemyAnimationName
 * @text SV エネミーアニメーション名
 * @desc SV エネミーが利用する Sprite Studio の共通アニメーション名です。
 * @type string
 * @default walk
 *
 *
 * @command loadSsfb
 * @text ssfbロード
 * @desc ssfb ファイルと関連画像をダウンロードしロードします。
 *
 * @arg ssfbId
 * @text ssfb ID
 * @desc 登録する ssfb ID です。他のコマンドから参照するのに利用します。
 * @type number
 * @min 1
 *
 * @arg ssfbFile
 * @text ssfbファイルパス
 * @desc ssfb ファイルをアニメーションディレクトリからの相対パスで指定してください。 (e.g. MeshBone/Knight.ssbp.ssfb)
 * @type string
 *
 *
 * @command setAsPicture
 * @text アニメーションピクチャの設定
 * @desc ピクチャとして表示するアニメーションを設定します。
 *       この後、画像を指定せずに「ピクチャの表示」を実行してください。
 *
 * @arg ssfbId
 * @text ssfb ID
 * @desc 利用する ssfb ID を指定してください。
 * @type number
 * @min 1
 *
 * @arg animePackName
 * @text アニメパック名
 * @desc 再生するアニメパック名(ssae)を指定してください。
 *       e.g. Knight_bomb
 * @type string
 *
 * @arg animeName
 * @text アニメ名
 * @desc 再生するアニメ名を指定してください。
 *       e.g. Balloon
 * @type string
 *
 * @arg scaleX
 * @text スケールX
 * @desc X のスケールを指定します
 * @type decimals
 * @default 1.0
 *
 * @arg scaleY
 * @text スケールY
 * @desc Y のスケールを指定します
 * @type decimals
 * @default 1.0
 *
 * @arg loop
 * @text 再生ループ回数
 * @desc 再生ループ回数を指定します。 -1 を指定すると無限ループで再生します。
 * @type number
 * @default 1
 * @min -1
 *
 *
 * @command waitForPicture
 * @text ピクチャ再生待ち
 * @desc アニメーションが再生完了するまでウエイトします。ピクチャにアニメーションがない場合とループ再生時は無視されます。
 *
 * @arg pictureId
 * @text Picture ID
 * @desc アニメーション再生中のピクチャの ID を指定してください。
 * @type number
 * @min 1
 *
 */

!function(){"use strict";const t=new Int32Array(2),e=new Float32Array(t.buffer),n=new Float64Array(t.buffer),i=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];class a{constructor(t,e){this.low=0|t,this.high=0|e}static create(t,e){return 0==t&&0==e?a.ZERO:new a(t,e)}toFloat64(){return(this.low>>>0)+4294967296*this.high}equals(t){return this.low==t.low&&this.high==t.high}}var r;a.ZERO=new a(0,0),function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"}(r||(r={}));class s{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new s(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new a(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new a(this.readUint32(t),this.readUint32(t+4))}readFloat32(n){return t[0]=this.readInt32(n),e[0]}readFloat64(e){return t[i?0:1]=this.readInt32(e),t[i?1:0]=this.readInt32(e+4),n[0]}writeInt8(t,e){this.bytes_[t]=e}writeUint8(t,e){this.bytes_[t]=e}writeInt16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeUint16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeInt32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeUint32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeInt64(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)}writeUint64(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)}writeFloat32(n,i){e[0]=i,this.writeInt32(n,t[0])}writeFloat64(e,a){n[0]=a,this.writeInt32(e,t[i?0:1]),this.writeInt32(e+4,t[i?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let e=0;e<4;e++)t+=String.fromCharCode(this.readInt8(this.position_+4+e));return t}__offset(t,e){const n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0}__union(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}__string(t,e){t+=this.readInt32(t);const n=this.readInt32(t);let i="",a=0;if(t+=4,e===r.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;a<n;){let e;const n=this.readUint8(t+a++);if(n<192)e=n;else{const i=this.readUint8(t+a++);if(n<224)e=(31&n)<<6|63&i;else{const r=this.readUint8(t+a++);if(n<240)e=(15&n)<<12|(63&i)<<6|63&r;else{e=(7&n)<<18|(63&i)<<12|(63&r)<<6|63&this.readUint8(t+a++)}}}e<65536?i+=String.fromCharCode(e):(e-=65536,i+=String.fromCharCode(55296+(e>>10),56320+(1023&e)))}return i}__union_with_string(t,e){return"string"==typeof t?this.__string(e):this.__union(t,e)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+4}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let e=0;e<4;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+4+e))return!1;return!0}createLong(t,e){return a.create(t,e)}createScalarList(t,e){const n=[];for(let i=0;i<e;++i)null!==t(i)&&n.push(t(i));return n}createObjList(t,e){const n=[];for(let i=0;i<e;++i){const e=t(i);null!==e&&n.push(e.unpack())}return n}}const o=new Int32Array(2);var b;new Float32Array(o.buffer),new Float64Array(o.buffer),new Uint16Array(new Uint8Array([1,0]).buffer)[0],function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"}(b||(b={}));var c,d=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsAnimationInitialData=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsAnimationInitialData=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.index=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.lowflag=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0},t.prototype.highflag=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):0},t.prototype.priority=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.cellIndex=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.opacity=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.localopacity=function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.masklimen=function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.positionX=function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.positionY=function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.positionZ=function(){var t=this.bb.__offset(this.bb_pos,24);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.pivotX=function(){var t=this.bb.__offset(this.bb_pos,26);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.pivotY=function(){var t=this.bb.__offset(this.bb_pos,28);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.rotationX=function(){var t=this.bb.__offset(this.bb_pos,30);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.rotationY=function(){var t=this.bb.__offset(this.bb_pos,32);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.rotationZ=function(){var t=this.bb.__offset(this.bb_pos,34);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.scaleX=function(){var t=this.bb.__offset(this.bb_pos,36);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.scaleY=function(){var t=this.bb.__offset(this.bb_pos,38);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.localscaleX=function(){var t=this.bb.__offset(this.bb_pos,40);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.localscaleY=function(){var t=this.bb.__offset(this.bb_pos,42);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.sizeX=function(){var t=this.bb.__offset(this.bb_pos,44);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.sizeY=function(){var t=this.bb.__offset(this.bb_pos,46);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.uvMoveX=function(){var t=this.bb.__offset(this.bb_pos,48);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.uvMoveY=function(){var t=this.bb.__offset(this.bb_pos,50);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.uvRotation=function(){var t=this.bb.__offset(this.bb_pos,52);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.uvScaleX=function(){var t=this.bb.__offset(this.bb_pos,54);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.uvScaleY=function(){var t=this.bb.__offset(this.bb_pos,56);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.boundingRadius=function(){var t=this.bb.__offset(this.bb_pos,58);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.instanceValueCurKeyframe=function(){var t=this.bb.__offset(this.bb_pos,60);return t?this.bb.readInt32(this.bb_pos+t):0},t.prototype.instanceValueStartFrame=function(){var t=this.bb.__offset(this.bb_pos,62);return t?this.bb.readInt32(this.bb_pos+t):0},t.prototype.instanceValueEndFrame=function(){var t=this.bb.__offset(this.bb_pos,64);return t?this.bb.readInt32(this.bb_pos+t):0},t.prototype.instanceValueLoopNum=function(){var t=this.bb.__offset(this.bb_pos,66);return t?this.bb.readInt32(this.bb_pos+t):0},t.prototype.instanceValueSpeed=function(){var t=this.bb.__offset(this.bb_pos,68);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.instanceValueLoopflag=function(){var t=this.bb.__offset(this.bb_pos,70);return t?this.bb.readInt32(this.bb_pos+t):0},t.prototype.effectValueCurKeyframe=function(){var t=this.bb.__offset(this.bb_pos,72);return t?this.bb.readInt32(this.bb_pos+t):0},t.prototype.effectValueStartTime=function(){var t=this.bb.__offset(this.bb_pos,74);return t?this.bb.readInt32(this.bb_pos+t):0},t.prototype.effectValueSpeed=function(){var t=this.bb.__offset(this.bb_pos,76);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.effectValueLoopflag=function(){var t=this.bb.__offset(this.bb_pos,78);return t?this.bb.readInt32(this.bb_pos+t):0},t.startAnimationInitialData=function(t){t.startObject(38)},t.addIndex=function(t,e){t.addFieldInt16(0,e,0)},t.addLowflag=function(t,e){t.addFieldInt32(1,e,0)},t.addHighflag=function(t,e){t.addFieldInt32(2,e,0)},t.addPriority=function(t,e){t.addFieldInt16(3,e,0)},t.addCellIndex=function(t,e){t.addFieldInt16(4,e,0)},t.addOpacity=function(t,e){t.addFieldInt16(5,e,0)},t.addLocalopacity=function(t,e){t.addFieldInt16(6,e,0)},t.addMasklimen=function(t,e){t.addFieldInt16(7,e,0)},t.addPositionX=function(t,e){t.addFieldFloat32(8,e,0)},t.addPositionY=function(t,e){t.addFieldFloat32(9,e,0)},t.addPositionZ=function(t,e){t.addFieldFloat32(10,e,0)},t.addPivotX=function(t,e){t.addFieldFloat32(11,e,0)},t.addPivotY=function(t,e){t.addFieldFloat32(12,e,0)},t.addRotationX=function(t,e){t.addFieldFloat32(13,e,0)},t.addRotationY=function(t,e){t.addFieldFloat32(14,e,0)},t.addRotationZ=function(t,e){t.addFieldFloat32(15,e,0)},t.addScaleX=function(t,e){t.addFieldFloat32(16,e,0)},t.addScaleY=function(t,e){t.addFieldFloat32(17,e,0)},t.addLocalscaleX=function(t,e){t.addFieldFloat32(18,e,0)},t.addLocalscaleY=function(t,e){t.addFieldFloat32(19,e,0)},t.addSizeX=function(t,e){t.addFieldFloat32(20,e,0)},t.addSizeY=function(t,e){t.addFieldFloat32(21,e,0)},t.addUvMoveX=function(t,e){t.addFieldFloat32(22,e,0)},t.addUvMoveY=function(t,e){t.addFieldFloat32(23,e,0)},t.addUvRotation=function(t,e){t.addFieldFloat32(24,e,0)},t.addUvScaleX=function(t,e){t.addFieldFloat32(25,e,0)},t.addUvScaleY=function(t,e){t.addFieldFloat32(26,e,0)},t.addBoundingRadius=function(t,e){t.addFieldFloat32(27,e,0)},t.addInstanceValueCurKeyframe=function(t,e){t.addFieldInt32(28,e,0)},t.addInstanceValueStartFrame=function(t,e){t.addFieldInt32(29,e,0)},t.addInstanceValueEndFrame=function(t,e){t.addFieldInt32(30,e,0)},t.addInstanceValueLoopNum=function(t,e){t.addFieldInt32(31,e,0)},t.addInstanceValueSpeed=function(t,e){t.addFieldFloat32(32,e,0)},t.addInstanceValueLoopflag=function(t,e){t.addFieldInt32(33,e,0)},t.addEffectValueCurKeyframe=function(t,e){t.addFieldInt32(34,e,0)},t.addEffectValueStartTime=function(t,e){t.addFieldInt32(35,e,0)},t.addEffectValueSpeed=function(t,e){t.addFieldFloat32(36,e,0)},t.addEffectValueLoopflag=function(t,e){t.addFieldInt32(37,e,0)},t.endAnimationInitialData=function(t){return t.endObject()},t.createAnimationInitialData=function(e,n,i,a,r,s,o,b,c,d,l,h,f,u,p,_,m,y,v,I,S,F,P,g,E,A,D,V,O,M,C,L,w,T,N,x,k,R,X){return t.startAnimationInitialData(e),t.addIndex(e,n),t.addLowflag(e,i),t.addHighflag(e,a),t.addPriority(e,r),t.addCellIndex(e,s),t.addOpacity(e,o),t.addLocalopacity(e,b),t.addMasklimen(e,c),t.addPositionX(e,d),t.addPositionY(e,l),t.addPositionZ(e,h),t.addPivotX(e,f),t.addPivotY(e,u),t.addRotationX(e,p),t.addRotationY(e,_),t.addRotationZ(e,m),t.addScaleX(e,y),t.addScaleY(e,v),t.addLocalscaleX(e,I),t.addLocalscaleY(e,S),t.addSizeX(e,F),t.addSizeY(e,P),t.addUvMoveX(e,g),t.addUvMoveY(e,E),t.addUvRotation(e,A),t.addUvScaleX(e,D),t.addUvScaleY(e,V),t.addBoundingRadius(e,O),t.addInstanceValueCurKeyframe(e,M),t.addInstanceValueStartFrame(e,C),t.addInstanceValueEndFrame(e,L),t.addInstanceValueLoopNum(e,w),t.addInstanceValueSpeed(e,T),t.addInstanceValueLoopflag(e,N),t.addEffectValueCurKeyframe(e,x),t.addEffectValueStartTime(e,k),t.addEffectValueSpeed(e,R),t.addEffectValueLoopflag(e,X),t.endAnimationInitialData(e)},t}(),l=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAspartState=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAspartState=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.index=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.flag1=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint32(this.bb_pos+t):0},t.prototype.flag2=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint32(this.bb_pos+t):0},t.prototype.data=function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0},t.prototype.dataLength=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.dataArray=function(){var t=this.bb.__offset(this.bb_pos,10);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},t.startpartState=function(t){t.startObject(4)},t.addIndex=function(t,e){t.addFieldInt16(0,e,0)},t.addFlag1=function(t,e){t.addFieldInt32(1,e,0)},t.addFlag2=function(t,e){t.addFieldInt32(2,e,0)},t.addData=function(t,e){t.addFieldOffset(3,e,0)},t.createDataVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()},t.startDataVector=function(t,e){t.startVector(4,e,4)},t.endpartState=function(t){return t.endObject()},t.createpartState=function(e,n,i,a,r){return t.startpartState(e),t.addIndex(e,n),t.addFlag1(e,i),t.addFlag2(e,a),t.addData(e,r),t.endpartState(e)},t}(),h=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsframeDataIndex=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsframeDataIndex=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.states=function(t,e){var n=this.bb.__offset(this.bb_pos,4);return n?(e||new l).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.statesLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},t.startframeDataIndex=function(t){t.startObject(1)},t.addStates=function(t,e){t.addFieldOffset(0,e,0)},t.createStatesVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startStatesVector=function(t,e){t.startVector(4,e,4)},t.endframeDataIndex=function(t){return t.endObject()},t.createframeDataIndex=function(e,n){return t.startframeDataIndex(e),t.addStates(e,n),t.endframeDataIndex(e)},t}(),f=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAslabelDataItem=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAslabelDataItem=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.label=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.frameIndex=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt16(this.bb_pos+t):0},t.startlabelDataItem=function(t){t.startObject(2)},t.addLabel=function(t,e){t.addFieldOffset(0,e,0)},t.addFrameIndex=function(t,e){t.addFieldInt16(1,e,0)},t.endlabelDataItem=function(t){return t.endObject()},t.createlabelDataItem=function(e,n,i){return t.startlabelDataItem(e),t.addLabel(e,n),t.addFrameIndex(e,i),t.endlabelDataItem(e)},t}(),u=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsmeshDataIndices=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsmeshDataIndices=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.indices=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readFloat32(this.bb.__vector(this.bb_pos+e)+4*t):0},t.prototype.indicesLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.indicesArray=function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},t.startmeshDataIndices=function(t){t.startObject(1)},t.addIndices=function(t,e){t.addFieldOffset(0,e,0)},t.createIndicesVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addFloat32(e[n]);return t.endVector()},t.startIndicesVector=function(t,e){t.startVector(4,e,4)},t.endmeshDataIndices=function(t){return t.endObject()},t.createmeshDataIndices=function(e,n){return t.startmeshDataIndices(e),t.addIndices(e,n),t.endmeshDataIndices(e)},t}(),p=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsmeshDataUV=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsmeshDataUV=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.uv=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readFloat32(this.bb.__vector(this.bb_pos+e)+4*t):0},t.prototype.uvLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.uvArray=function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},t.startmeshDataUV=function(t){t.startObject(1)},t.addUv=function(t,e){t.addFieldOffset(0,e,0)},t.createUvVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addFloat32(e[n]);return t.endVector()},t.startUvVector=function(t,e){t.startVector(4,e,4)},t.endmeshDataUV=function(t){return t.endObject()},t.createmeshDataUV=function(e,n){return t.startmeshDataUV(e),t.addUv(e,n),t.endmeshDataUV(e)},t}(),_=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsuserDataItem=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsuserDataItem=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.flags=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.arrayIndex=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.dataType=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0},t.prototype.dataTypeLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.dataTypeArray=function(){var t=this.bb.__offset(this.bb_pos,8);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},t.prototype.data=function(t,e){var n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(e,this.bb.__vector(this.bb_pos+n)+4*t):null},t.prototype.dataLength=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0},t.startuserDataItem=function(t){t.startObject(4)},t.addFlags=function(t,e){t.addFieldInt16(0,e,0)},t.addArrayIndex=function(t,e){t.addFieldInt16(1,e,0)},t.addDataType=function(t,e){t.addFieldOffset(2,e,0)},t.createDataTypeVector=function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()},t.startDataTypeVector=function(t,e){t.startVector(1,e,1)},t.addData=function(t,e){t.addFieldOffset(3,e,0)},t.createDataVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startDataVector=function(t,e){t.startVector(4,e,4)},t.enduserDataItem=function(t){return t.endObject()},t.createuserDataItem=function(e,n,i,a,r){return t.startuserDataItem(e),t.addFlags(e,n),t.addArrayIndex(e,i),t.addDataType(e,a),t.addData(e,r),t.enduserDataItem(e)},t}(),m=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsuserDataPerFrame=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsuserDataPerFrame=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.frameIndex=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.data=function(t,e){var n=this.bb.__offset(this.bb_pos,6);return n?(e||new _).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.dataLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},t.startuserDataPerFrame=function(t){t.startObject(2)},t.addFrameIndex=function(t,e){t.addFieldInt16(0,e,0)},t.addData=function(t,e){t.addFieldOffset(1,e,0)},t.createDataVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startDataVector=function(t,e){t.startVector(4,e,4)},t.enduserDataPerFrame=function(t){return t.endObject()},t.createuserDataPerFrame=function(e,n,i){return t.startuserDataPerFrame(e),t.addFrameIndex(e,n),t.addData(e,i),t.enduserDataPerFrame(e)},t}(),y=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsAnimationData=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsAnimationData=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.defaultData=function(t,e){var n=this.bb.__offset(this.bb_pos,6);return n?(e||new d).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.defaultDataLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.frameData=function(t,e){var n=this.bb.__offset(this.bb_pos,8);return n?(e||new h).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.frameDataLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.userData=function(t,e){var n=this.bb.__offset(this.bb_pos,10);return n?(e||new m).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.userDataLength=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.labelData=function(t,e){var n=this.bb.__offset(this.bb_pos,12);return n?(e||new f).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.labelDataLength=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.meshsDataUV=function(t,e){var n=this.bb.__offset(this.bb_pos,14);return n?(e||new p).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.meshsDataUVLength=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.meshsDataIndices=function(t,e){var n=this.bb.__offset(this.bb_pos,16);return n?(e||new u).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.meshsDataIndicesLength=function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.startFrames=function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.endFrames=function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.totalFrames=function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.fps=function(){var t=this.bb.__offset(this.bb_pos,24);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.labelNum=function(){var t=this.bb.__offset(this.bb_pos,26);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.canvasSizeW=function(){var t=this.bb.__offset(this.bb_pos,28);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.canvasSizeH=function(){var t=this.bb.__offset(this.bb_pos,30);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.canvasPvotX=function(){var t=this.bb.__offset(this.bb_pos,32);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.canvasPvotY=function(){var t=this.bb.__offset(this.bb_pos,34);return t?this.bb.readFloat32(this.bb_pos+t):0},t.startAnimationData=function(t){t.startObject(16)},t.addName=function(t,e){t.addFieldOffset(0,e,0)},t.addDefaultData=function(t,e){t.addFieldOffset(1,e,0)},t.createDefaultDataVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startDefaultDataVector=function(t,e){t.startVector(4,e,4)},t.addFrameData=function(t,e){t.addFieldOffset(2,e,0)},t.createFrameDataVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startFrameDataVector=function(t,e){t.startVector(4,e,4)},t.addUserData=function(t,e){t.addFieldOffset(3,e,0)},t.createUserDataVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startUserDataVector=function(t,e){t.startVector(4,e,4)},t.addLabelData=function(t,e){t.addFieldOffset(4,e,0)},t.createLabelDataVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startLabelDataVector=function(t,e){t.startVector(4,e,4)},t.addMeshsDataUV=function(t,e){t.addFieldOffset(5,e,0)},t.createMeshsDataUVVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startMeshsDataUVVector=function(t,e){t.startVector(4,e,4)},t.addMeshsDataIndices=function(t,e){t.addFieldOffset(6,e,0)},t.createMeshsDataIndicesVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startMeshsDataIndicesVector=function(t,e){t.startVector(4,e,4)},t.addStartFrames=function(t,e){t.addFieldInt16(7,e,0)},t.addEndFrames=function(t,e){t.addFieldInt16(8,e,0)},t.addTotalFrames=function(t,e){t.addFieldInt16(9,e,0)},t.addFps=function(t,e){t.addFieldInt16(10,e,0)},t.addLabelNum=function(t,e){t.addFieldInt16(11,e,0)},t.addCanvasSizeW=function(t,e){t.addFieldInt16(12,e,0)},t.addCanvasSizeH=function(t,e){t.addFieldInt16(13,e,0)},t.addCanvasPvotX=function(t,e){t.addFieldFloat32(14,e,0)},t.addCanvasPvotY=function(t,e){t.addFieldFloat32(15,e,0)},t.endAnimationData=function(t){return t.endObject()},t.createAnimationData=function(e,n,i,a,r,s,o,b,c,d,l,h,f,u,p,_,m){return t.startAnimationData(e),t.addName(e,n),t.addDefaultData(e,i),t.addFrameData(e,a),t.addUserData(e,r),t.addLabelData(e,s),t.addMeshsDataUV(e,o),t.addMeshsDataIndices(e,b),t.addStartFrames(e,c),t.addEndFrames(e,d),t.addTotalFrames(e,l),t.addFps(e,h),t.addLabelNum(e,f),t.addCanvasSizeW(e,u),t.addCanvasSizeH(e,p),t.addCanvasPvotX(e,_),t.addCanvasPvotY(e,m),t.endAnimationData(e)},t}();!function(t){t[t.Invalid=-1]="Invalid",t[t.Nulltype=0]="Nulltype",t[t.Normal=1]="Normal",t[t.Text=2]="Text",t[t.Instance=3]="Instance",t[t.Armature=4]="Armature",t[t.Effect=5]="Effect",t[t.Mesh=6]="Mesh",t[t.Movenode=7]="Movenode",t[t.Constraint=8]="Constraint",t[t.Mask=9]="Mask",t[t.Joint=10]="Joint",t[t.Bonepoint=11]="Bonepoint"}(c||(c={}));var v,I,S,F=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsPartData=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsPartData=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.index=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.parentIndex=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.type=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt8(this.bb_pos+t):c.Nulltype},t.prototype.boundsType=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.alphaBlendType=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.refname=function(t){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.effectfilename=function(t){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.colorLabel=function(t){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.maskInfluence=function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readInt16(this.bb_pos+t):0},t.startPartData=function(t){t.startObject(10)},t.addName=function(t,e){t.addFieldOffset(0,e,0)},t.addIndex=function(t,e){t.addFieldInt16(1,e,0)},t.addParentIndex=function(t,e){t.addFieldInt16(2,e,0)},t.addType=function(t,e){t.addFieldInt8(3,e,c.Nulltype)},t.addBoundsType=function(t,e){t.addFieldInt16(4,e,0)},t.addAlphaBlendType=function(t,e){t.addFieldInt16(5,e,0)},t.addRefname=function(t,e){t.addFieldOffset(6,e,0)},t.addEffectfilename=function(t,e){t.addFieldOffset(7,e,0)},t.addColorLabel=function(t,e){t.addFieldOffset(8,e,0)},t.addMaskInfluence=function(t,e){t.addFieldInt16(9,e,0)},t.endPartData=function(t){return t.endObject()},t.createPartData=function(e,n,i,a,r,s,o,b,c,d,l){return t.startPartData(e),t.addName(e,n),t.addIndex(e,i),t.addParentIndex(e,a),t.addType(e,r),t.addBoundsType(e,s),t.addAlphaBlendType(e,o),t.addRefname(e,b),t.addEffectfilename(e,c),t.addColorLabel(e,d),t.addMaskInfluence(e,l),t.endPartData(e)},t}(),P=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsAnimePackData=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsAnimePackData=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.parts=function(t,e){var n=this.bb.__offset(this.bb_pos,6);return n?(e||new F).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.partsLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.animations=function(t,e){var n=this.bb.__offset(this.bb_pos,8);return n?(e||new y).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.animationsLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},t.startAnimePackData=function(t){t.startObject(3)},t.addName=function(t,e){t.addFieldOffset(0,e,0)},t.addParts=function(t,e){t.addFieldOffset(1,e,0)},t.createPartsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startPartsVector=function(t,e){t.startVector(4,e,4)},t.addAnimations=function(t,e){t.addFieldOffset(2,e,0)},t.createAnimationsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startAnimationsVector=function(t,e){t.startVector(4,e,4)},t.endAnimePackData=function(t){return t.endObject()},t.createAnimePackData=function(e,n,i,a){return t.startAnimePackData(e),t.addName(e,n),t.addParts(e,i),t.addAnimations(e,a),t.endAnimePackData(e)},t}(),g=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsCellMap=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsCellMap=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.imagePath=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.index=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.wrapmode=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.filtermode=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt16(this.bb_pos+t):0},t.startCellMap=function(t){t.startObject(5)},t.addName=function(t,e){t.addFieldOffset(0,e,0)},t.addImagePath=function(t,e){t.addFieldOffset(1,e,0)},t.addIndex=function(t,e){t.addFieldInt16(2,e,0)},t.addWrapmode=function(t,e){t.addFieldInt16(3,e,0)},t.addFiltermode=function(t,e){t.addFieldInt16(4,e,0)},t.endCellMap=function(t){return t.endObject()},t.createCellMap=function(e,n,i,a,r,s){return t.startCellMap(e),t.addName(e,n),t.addImagePath(e,i),t.addIndex(e,a),t.addWrapmode(e,r),t.addFiltermode(e,s),t.endCellMap(e)},t}(),E=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsCell=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsCell=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.cellMap=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?(t||new g).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null},t.prototype.indexInCellMap=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.x=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.y=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.width=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.height=function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.pivotX=function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.pivotY=function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.u1=function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.v1=function(){var t=this.bb.__offset(this.bb_pos,24);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.u2=function(){var t=this.bb.__offset(this.bb_pos,26);return t?this.bb.readFloat32(this.bb_pos+t):0},t.prototype.v2=function(){var t=this.bb.__offset(this.bb_pos,28);return t?this.bb.readFloat32(this.bb_pos+t):0},t.startCell=function(t){t.startObject(13)},t.addName=function(t,e){t.addFieldOffset(0,e,0)},t.addCellMap=function(t,e){t.addFieldOffset(1,e,0)},t.addIndexInCellMap=function(t,e){t.addFieldInt16(2,e,0)},t.addX=function(t,e){t.addFieldInt16(3,e,0)},t.addY=function(t,e){t.addFieldInt16(4,e,0)},t.addWidth=function(t,e){t.addFieldInt16(5,e,0)},t.addHeight=function(t,e){t.addFieldInt16(6,e,0)},t.addPivotX=function(t,e){t.addFieldFloat32(7,e,0)},t.addPivotY=function(t,e){t.addFieldFloat32(8,e,0)},t.addU1=function(t,e){t.addFieldFloat32(9,e,0)},t.addV1=function(t,e){t.addFieldFloat32(10,e,0)},t.addU2=function(t,e){t.addFieldFloat32(11,e,0)},t.addV2=function(t,e){t.addFieldFloat32(12,e,0)},t.endCell=function(t){return t.endObject()},t}(),A=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsEffectNode=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsEffectNode=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.arrayIndex=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.parentIndex=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.type=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.cellIndex=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.blendType=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.numBehavior=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.BehaviorType=function(t){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0},t.prototype.BehaviorTypeLength=function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.BehaviorTypeArray=function(){var t=this.bb.__offset(this.bb_pos,16);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},t.prototype.Behavior=function(t,e){var n=this.bb.__offset(this.bb_pos,18);return n?this.bb.__union(e,this.bb.__vector(this.bb_pos+n)+4*t):null},t.prototype.BehaviorLength=function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0},t.startEffectNode=function(t){t.startObject(8)},t.addArrayIndex=function(t,e){t.addFieldInt16(0,e,0)},t.addParentIndex=function(t,e){t.addFieldInt16(1,e,0)},t.addType=function(t,e){t.addFieldInt16(2,e,0)},t.addCellIndex=function(t,e){t.addFieldInt16(3,e,0)},t.addBlendType=function(t,e){t.addFieldInt16(4,e,0)},t.addNumBehavior=function(t,e){t.addFieldInt16(5,e,0)},t.addBehaviorType=function(t,e){t.addFieldOffset(6,e,0)},t.createBehaviorTypeVector=function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()},t.startBehaviorTypeVector=function(t,e){t.startVector(1,e,1)},t.addBehavior=function(t,e){t.addFieldOffset(7,e,0)},t.createBehaviorVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startBehaviorVector=function(t,e){t.startVector(4,e,4)},t.endEffectNode=function(t){return t.endObject()},t.createEffectNode=function(e,n,i,a,r,s,o,b,c){return t.startEffectNode(e),t.addArrayIndex(e,n),t.addParentIndex(e,i),t.addType(e,a),t.addCellIndex(e,r),t.addBlendType(e,s),t.addNumBehavior(e,o),t.addBehaviorType(e,b),t.addBehavior(e,c),t.endEffectNode(e)},t}(),D=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsEffectFile=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsEffectFile=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.fps=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.isLockRandSeed=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.lockRandSeed=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.layoutScaleX=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.layoutScaleY=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.numNodeList=function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.effectNode=function(t,e){var n=this.bb.__offset(this.bb_pos,18);return n?(e||new A).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.effectNodeLength=function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0},t.startEffectFile=function(t){t.startObject(8)},t.addName=function(t,e){t.addFieldOffset(0,e,0)},t.addFps=function(t,e){t.addFieldInt16(1,e,0)},t.addIsLockRandSeed=function(t,e){t.addFieldInt16(2,e,0)},t.addLockRandSeed=function(t,e){t.addFieldInt16(3,e,0)},t.addLayoutScaleX=function(t,e){t.addFieldInt16(4,e,0)},t.addLayoutScaleY=function(t,e){t.addFieldInt16(5,e,0)},t.addNumNodeList=function(t,e){t.addFieldInt16(6,e,0)},t.addEffectNode=function(t,e){t.addFieldOffset(7,e,0)},t.createEffectNodeVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startEffectNodeVector=function(t,e){t.startVector(4,e,4)},t.endEffectFile=function(t){return t.endObject()},t.createEffectFile=function(e,n,i,a,r,s,o,b,c){return t.startEffectFile(e),t.addName(e,n),t.addFps(e,i),t.addIsLockRandSeed(e,a),t.addLockRandSeed(e,r),t.addLayoutScaleX(e,s),t.addLayoutScaleY(e,o),t.addNumNodeList(e,b),t.addEffectNode(e,c),t.endEffectFile(e)},t}();!function(t){t[t.NONE=0]="NONE",t[t.EffectParticleElementBasic=1]="EffectParticleElementBasic",t[t.EffectParticleElementRndSeedChange=2]="EffectParticleElementRndSeedChange",t[t.EffectParticleElementDelay=3]="EffectParticleElementDelay",t[t.EffectParticleElementGravity=4]="EffectParticleElementGravity",t[t.EffectParticleElementPosition=5]="EffectParticleElementPosition",t[t.EffectParticleElementRotation=6]="EffectParticleElementRotation",t[t.EffectParticleElementRotationTrans=7]="EffectParticleElementRotationTrans",t[t.EffectParticleElementTransSpeed=8]="EffectParticleElementTransSpeed",t[t.EffectParticleElementTangentialAcceleration=9]="EffectParticleElementTangentialAcceleration",t[t.EffectParticleElementInitColor=10]="EffectParticleElementInitColor",t[t.EffectParticleElementTransColor=11]="EffectParticleElementTransColor",t[t.EffectParticleElementAlphaFade=12]="EffectParticleElementAlphaFade",t[t.EffectParticleElementSize=13]="EffectParticleElementSize",t[t.EffectParticleElementTransSize=14]="EffectParticleElementTransSize",t[t.EffectParticlePointGravity=15]="EffectParticlePointGravity",t[t.EffectParticleTurnToDirectionEnabled=16]="EffectParticleTurnToDirectionEnabled",t[t.EffectParticleInfiniteEmitEnabled=17]="EffectParticleInfiniteEmitEnabled"}(v||(v={})),function(t){t[t.INVISIBLE=1]="INVISIBLE",t[t.FLIP_H=2]="FLIP_H",t[t.FLIP_V=4]="FLIP_V",t[t.CELL_INDEX=8]="CELL_INDEX",t[t.POSITION_X=16]="POSITION_X",t[t.POSITION_Y=32]="POSITION_Y",t[t.POSITION_Z=64]="POSITION_Z",t[t.PIVOT_X=128]="PIVOT_X",t[t.PIVOT_Y=256]="PIVOT_Y",t[t.ROTATIONX=512]="ROTATIONX",t[t.ROTATIONY=1024]="ROTATIONY",t[t.ROTATIONZ=2048]="ROTATIONZ",t[t.SCALE_X=4096]="SCALE_X",t[t.SCALE_Y=8192]="SCALE_Y",t[t.LOCALSCALE_X=16384]="LOCALSCALE_X",t[t.LOCALSCALE_Y=32768]="LOCALSCALE_Y",t[t.OPACITY=65536]="OPACITY",t[t.LOCALOPACITY=131072]="LOCALOPACITY",t[t.PARTS_COLOR=262144]="PARTS_COLOR",t[t.VERTEX_TRANSFORM=524288]="VERTEX_TRANSFORM",t[t.SIZE_X=1048576]="SIZE_X",t[t.SIZE_Y=2097152]="SIZE_Y",t[t.U_MOVE=4194304]="U_MOVE",t[t.V_MOVE=8388608]="V_MOVE",t[t.UV_ROTATION=16777216]="UV_ROTATION",t[t.U_SCALE=33554432]="U_SCALE",t[t.V_SCALE=67108864]="V_SCALE",t[t.BOUNDINGRADIUS=134217728]="BOUNDINGRADIUS",t[t.MASK=268435456]="MASK",t[t.PRIORITY=536870912]="PRIORITY",t[t.INSTANCE_KEYFRAME=1073741824]="INSTANCE_KEYFRAME",t[t.EFFECT_KEYFRAME=2147483648]="EFFECT_KEYFRAME"}(I||(I={})),function(t){t[t.MESHDATA=1]="MESHDATA"}(S||(S={}));var V,O,M=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsProjectData=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsProjectData=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.bufferHasIdentifier=function(t){return t.__has_identifier("SSFB")},t.prototype.dataId=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb_pos+t):0},t.prototype.version=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint32(this.bb_pos+t):0},t.prototype.flags=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint32(this.bb_pos+t):0},t.prototype.imageBaseDir=function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.cells=function(t,e){var n=this.bb.__offset(this.bb_pos,12);return n?(e||new E).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.cellsLength=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.animePacks=function(t,e){var n=this.bb.__offset(this.bb_pos,14);return n?(e||new P).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.animePacksLength=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.effectFileList=function(t,e){var n=this.bb.__offset(this.bb_pos,16);return n?(e||new D).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null},t.prototype.effectFileListLength=function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.numCells=function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.numAnimePacks=function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readInt16(this.bb_pos+t):0},t.prototype.numEffectFileList=function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readInt16(this.bb_pos+t):0},t.startProjectData=function(t){t.startObject(10)},t.addDataId=function(t,e){t.addFieldInt32(0,e,0)},t.addVersion=function(t,e){t.addFieldInt32(1,e,0)},t.addFlags=function(t,e){t.addFieldInt32(2,e,0)},t.addImageBaseDir=function(t,e){t.addFieldOffset(3,e,0)},t.addCells=function(t,e){t.addFieldOffset(4,e,0)},t.createCellsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startCellsVector=function(t,e){t.startVector(4,e,4)},t.addAnimePacks=function(t,e){t.addFieldOffset(5,e,0)},t.createAnimePacksVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startAnimePacksVector=function(t,e){t.startVector(4,e,4)},t.addEffectFileList=function(t,e){t.addFieldOffset(6,e,0)},t.createEffectFileListVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},t.startEffectFileListVector=function(t,e){t.startVector(4,e,4)},t.addNumCells=function(t,e){t.addFieldInt16(7,e,0)},t.addNumAnimePacks=function(t,e){t.addFieldInt16(8,e,0)},t.addNumEffectFileList=function(t,e){t.addFieldInt16(9,e,0)},t.endProjectData=function(t){return t.endObject()},t.finishProjectDataBuffer=function(t,e){t.finish(e,"SSFB")},t.finishSizePrefixedProjectDataBuffer=function(t,e){t.finish(e,"SSFB",!0)},t.createProjectData=function(e,n,i,a,r,s,o,b,c,d,l){return t.startProjectData(e),t.addDataId(e,n),t.addVersion(e,i),t.addFlags(e,a),t.addImageBaseDir(e,r),t.addCells(e,s),t.addAnimePacks(e,o),t.addEffectFileList(e,b),t.addNumCells(e,c),t.addNumAnimePacks(e,d),t.addNumEffectFileList(e,l),t.endProjectData(e)},t}(),C=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.prototype.integer=function(){return this.bb.readInt32(this.bb_pos)},t.sizeOf=function(){return 4},t.createuserDataInteger=function(t,e){return t.prep(4,4),t.writeInt32(e),t.offset()},t}(),L=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.prototype.x=function(){return this.bb.readInt32(this.bb_pos)},t.prototype.y=function(){return this.bb.readInt32(this.bb_pos+4)},t.sizeOf=function(){return 8},t.createuserDataPoint=function(t,e,n){return t.prep(4,8),t.writeInt32(n),t.writeInt32(e),t.offset()},t}(),w=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.prototype.x=function(){return this.bb.readInt32(this.bb_pos)},t.prototype.y=function(){return this.bb.readInt32(this.bb_pos+4)},t.prototype.w=function(){return this.bb.readInt32(this.bb_pos+8)},t.prototype.h=function(){return this.bb.readInt32(this.bb_pos+12)},t.sizeOf=function(){return 16},t.createuserDataRect=function(t,e,n,i,a){return t.prep(4,16),t.writeInt32(a),t.writeInt32(i),t.writeInt32(n),t.writeInt32(e),t.offset()},t}(),T=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsuserDataString=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsuserDataString=function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.length=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0},t.prototype.data=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},t.startuserDataString=function(t){t.startObject(2)},t.addLength=function(t,e){t.addFieldInt32(0,e,0)},t.addData=function(t,e){t.addFieldOffset(1,e,0)},t.enduserDataString=function(t){return t.endObject()},t.createuserDataString=function(e,n,i){return t.startuserDataString(e),t.addLength(e,n),t.addData(e,i),t.enduserDataString(e)},t}();!function(t){t[t.NONE=0]="NONE",t[t.userDataInteger=1]="userDataInteger",t[t.userDataRect=2]="userDataRect",t[t.userDataPoint=3]="userDataPoint",t[t.userDataString=4]="userDataString"}(V||(V={})),function(t){t[t.LT=1]="LT",t[t.RT=2]="RT",t[t.LB=4]="LB",t[t.RB=8]="RB",t[t.ONE=16]="ONE"}(O||(O={}));var N=function(){function t(t,e,n,i,a,r,s){if("string"==typeof t){var o=t,b=e,c=void 0!==n?n:0,d=void 0!==i?i:0,l=void 0!==a?a:null,h=void 0!==r?r:null,f=void 0!==s?s:null;this.ssfbPath=o;var u=o.lastIndexOf("/");this.rootPath=o.substring(0,u)+"/",this.status="not ready",this.onComplete=b,this.onError=l,this.onTimeout=h,this.onRetry=f,this.LoadFlatBuffersProject(o,c,d)}else if("object"==typeof t&&t.constructor===Uint8Array){var p=t,_=e;this.onComplete=void 0!==n?n:null,this.load(p,_)}}return t.prototype.LoadFlatBuffersProject=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0);var i=this,a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.timeout=e,a.onload=function(){if(a.status>=200&&a.status<400){var r=this.response,o=new Uint8Array(r),b=new s(o);i.fbObj=M.getRootAsProjectData(b),i.LoadCellResources()}else null!==i.onError&&i.onError(t,e,n,a)},a.ontimeout=function(){n>0?(null!==i.onRetry&&i.onRetry(t,e,n-1,a),i.LoadFlatBuffersProject(t,e,n-1)):null!==i.onTimeout&&i.onTimeout(t,e,n,a)},a.onerror=function(){null!==i.onError&&i.onError(t,e,n,a)},a.send(null)},t.prototype.LoadCellResources=function(){for(var t=this,e=new PIXI.Loader,n=[],i=function(i){n.some((function(e){return e===t.fbObj.cells(i).cellMap().index()}))||(n.push(t.fbObj.cells(i).cellMap().index()),e.add(t.fbObj.cells(i).cellMap().name(),t.rootPath+a.fbObj.cells(i).cellMap().imagePath()))},a=this,r=0;r<t.fbObj.cellsLength();r++)i(r);e.load((function(e,n){t.resources=n,t.status="ready",null!==t.onComplete&&t.onComplete()}))},t.prototype.load=function(t,e){var n=new s(t);this.fbObj=M.getRootAsProjectData(n);var i=new PIXI.Loader;for(var a in e){for(var r=e[a],o="",b=r.byteLength,c=0;c<b;c++)o+=String.fromCharCode(r[c]);var d="data:image/png;base64,"+window.btoa(o);i.add(a,d)}var l=this;i.load((function(t,e){l.resources=e,l.status="ready",null!==l.onComplete&&l.onComplete()}))},t}(),x=function(t,e){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var k=function(){this.refStartframe=0,this.refEndframe=0,this.refSpeed=1,this.refloopNum=0,this.infinity=!1,this.reverse=!1,this.pingpong=!1,this.independent=!1},R=function(t){function e(e,n,i){void 0===n&&(n=null),void 0===i&&(i=null);var a=t.call(this)||this;return a.animation=[],a.curAnimePackName=null,a.curAnimeName=null,a.curAnimation=null,a.curAnimePackData=null,a.parts=-1,a.parentIndex=[],a.prio2index=[],a.userData=[],a.frameDataCache={},a.currentCachedFrameNumber=-1,a.liveFrame=[],a.colorMatrixFilterCache=[],a.defaultFrameMap=[],a.parentAlpha=1,a.prevCellID=[],a.prevMesh=[],a.substituteOverWrite=[],a.substituteKeyParam=[],a.alphaBlendType=[],a._uint32=new Uint32Array(1),a._float32=new Float32Array(a._uint32.buffer),a.defaultColorFilter=new PIXI.filters.ColorMatrixFilter,a.ss6project=e,a.fbObj=a.ss6project.fbObj,a.resources=a.ss6project.resources,a.parentAlpha=1,null!==n&&null!==i&&a.Setup(n,i),PIXI.Ticker.shared.add(a.Update,a),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}x(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),Object.defineProperty(e.prototype,"startFrame",{get:function(){return this._startFrame},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endFrame",{get:function(){return this.curAnimation.endFrames()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalFrame",{get:function(){return this.curAnimation.totalFrames()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fps",{get:function(){return this.curAnimation.fps()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frameNo",{get:function(){return Math.floor(this._currentFrame)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loops},set:function(t){this._loops=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPausing",{get:function(){return this._isPausing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animePackName",{get:function(){return this.curAnimePackName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animeName",{get:function(){return this.curAnimeName},enumerable:!1,configurable:!0}),e.prototype.Setup=function(t,e){this.clearCaches();for(var n=this.fbObj.animePacksLength(),i=0;i<n;i++)if(this.fbObj.animePacks(i).name()===t){var a=void 0,r=this.fbObj.animePacks(i).animationsLength();for(a=0;a<r;a++)if(this.fbObj.animePacks(i).animations(a).name()===e){this.animation=[i,a],this.curAnimePackName=t,this.curAnimeName=e,this.curAnimePackData=this.fbObj.animePacks(this.animation[0]),this.curAnimation=this.curAnimePackData.animations(this.animation[1]);break}for(var s=this.curAnimation.defaultDataLength(),o=0;o<s;o++){var b=this.curAnimation.defaultData(o);this.defaultFrameMap[b.index()]=b}this.parts=i;var c=this.fbObj.animePacks(this.parts).partsLength();for(this.parentIndex=new Array(c),this.prevCellID=new Array(c),this.prevMesh=new Array(c),this.substituteOverWrite=new Array(c),this.substituteKeyParam=new Array(c),a=0;a<c;a++){var d=this.fbObj.animePacks(this.parts).parts(a).index();this.parentIndex[d]=this.fbObj.animePacks(i).parts(a).parentIndex(),this.prevCellID[d]=-1,this.prevMesh[d]=null,this.substituteOverWrite[d]=null,this.substituteKeyParam[d]=null}}this.alphaBlendType=this.GetPartsBlendMode(),this._isPlaying=!1,this._isPausing=!0,this._startFrame=this.curAnimation.startFrames(),this._endFrame=this.curAnimation.endFrames(),this._currentFrame=this.curAnimation.startFrames(),this.nextFrameTime=0,this._loops=-1,this.skipEnabled=!0,this.updateInterval=1e3/this.curAnimation.fps(),this.playDirection=1,this.onUserDataCallback=null,this.playEndCallback=null,this.parentAlpha=1},e.prototype.clearCaches=function(){this.prio2index=[],this.userData=[],this.frameDataCache=[],this.currentCachedFrameNumber=-1,this.liveFrame=[],this.colorMatrixFilterCache=[],this.defaultFrameMap=[]},e.prototype.Update=function(t){this.UpdateInternal(t)},e.prototype.UpdateInternal=function(t,e){void 0===e&&(e=!0);var n=PIXI.Ticker.shared.elapsedMS;if(this._isPlaying&&!this._isPausing&&0!==this.updateInterval){if(this.nextFrameTime+=n,this.nextFrameTime>=this.updateInterval){var i=!1,a=this.nextFrameTime/this.updateInterval;this.nextFrameTime-=this.updateInterval*a;var r=this.skipEnabled?a*this.playDirection:this.playDirection,s=this._currentFrame+r,o=Math.floor(s),b=s-o,c=Math.floor(this._currentFrame);if(this.playDirection>=1)for(var d=o-c;d;d--){var l=c+1;if(l>this._endFrame)if(-1===this._loops)l=this._startFrame;else{if(this._loops--,i=!0,0===this._loops){this._isPlaying=!1,l=e?this._startFrame:this._endFrame;break}l=this._startFrame}c=l,this._isPlaying&&this.HaveUserData(c)&&null!==this.onUserDataCallback&&this.onUserDataCallback(this.GetUserData(c))}if(this.playDirection<=-1)for(d=c-o;d;d--){var h=c-1;if(h<this._startFrame)if(-1===this._loops)h=this._endFrame;else{if(this._loops--,i=!0,0===this._loops){this._isPlaying=!1,h=e?this._endFrame:this._startFrame;break}h=this._endFrame}c=h,this._isPlaying&&this.HaveUserData(c)&&null!==this.onUserDataCallback&&this.onUserDataCallback(this.GetUserData(c))}this._currentFrame=c+b,i&&null!==this.playEndCallback&&this.playEndCallback(this),this.SetFrameAnimation(Math.floor(this._currentFrame),a)}}else this.SetFrameAnimation(Math.floor(this._currentFrame))},e.prototype.SetAnimationFramerate=function(t,e){void 0===e&&(e=!0),t<=0||(this.updateInterval=1e3/t,this.skipEnabled=e)},e.prototype.SetAnimationSpeed=function(t,e){void 0===e&&(e=!0),0!==t&&(this.playDirection=t>0?1:-1,this.updateInterval=1e3/(this.curAnimation.fps()*t*this.playDirection),this.skipEnabled=e)},e.prototype.SetAnimationSection=function(t,e,n){void 0===t&&(t=-1),void 0===e&&(e=-1),void 0===n&&(n=-1),t>=0&&t<this.curAnimation.totalFrames()&&(this._startFrame=t),e>=0&&e<this.curAnimation.totalFrames()&&(this._endFrame=e),this._loops=n>0?n:-1,this._currentFrame=this.playDirection>0?this._startFrame:this._endFrame},e.prototype.Play=function(t){this._isPlaying=!0,this._isPausing=!1;var e=this.playDirection>0?this._startFrame:this._endFrame;t&&"number"==typeof t&&(e=t),this._currentFrame=e,this.resetLiveFrame();var n=Math.floor(this._currentFrame);this.SetFrameAnimation(n),this.HaveUserData(n)&&null!==this.onUserDataCallback&&this.onUserDataCallback(this.GetUserData(n))},e.prototype.Pause=function(){this._isPausing=!0},e.prototype.Resume=function(){this._isPausing=!1},e.prototype.Stop=function(){this._isPlaying=!1},e.prototype.SetFrame=function(t){this._currentFrame=t},e.prototype.NextFrame=function(){var t=Math.floor(this._currentFrame);t!==this.endFrame&&this.SetFrame(t+1)},e.prototype.PrevFrame=function(){var t=Math.floor(this._currentFrame);0!==t&&this.SetFrame(t-1)},e.prototype.SetAlpha=function(t){this.parentAlpha=t},e.prototype.ThrowError=function(t){},e.prototype.SetUserDataCalback=function(t){this.onUserDataCallback=t},e.prototype.SetPlayEndCallback=function(t){this.playEndCallback=t},e.prototype.HaveUserData=function(t){if(-1===this.userData[t])return!1;if(this.userData[t])return!0;for(var e=0;e<this.curAnimation.userDataLength();e++)if(t===this.curAnimation.userData(e).frameIndex())return this.userData[t]=this.curAnimation.userData(e),!0;return this.userData[t]=-1,!1},e.prototype.GetUserData=function(t){if(!1!==this.HaveUserData(t)){for(var e=this.userData[t],n=e.dataLength(),i=0,a=[],r=0;r<n;r++){var s=e.data(r).flags(),o=e.data(r).arrayIndex(),b=null,c=null,d=null,l=null,h=null,f=null,u=null,p=null,_=null;1&s&&(b=e.data(r).data(i,new C).integer(),i++),2&s&&(c=e.data(r).data(i,new w).x(),d=e.data(r).data(i,new w).y(),l=e.data(r).data(i,new w).w(),h=e.data(r).data(i,new w).h(),i++),4&s&&(f=e.data(r).data(i,new L).x(),u=e.data(r).data(i,new L).y(),i++),8&s&&(p=e.data(r).data(i,new T).length(),_=e.data(r).data(i,new T).data(),i++),a.push([o,s,b,c,d,l,h,f,u,p,_])}return a}},e.prototype.GetPartsBlendMode=function(){for(var t=this.fbObj.animePacks(this.parts).partsLength(),e=[],n=this.fbObj.animePacks(this.parts),i=0;i<t;i++)e.push(n.parts(i).alphaBlendType());return e},e.prototype.I2F=function(t){return this._uint32[0]=t,this._float32[0]},e.prototype.GetFrameData=function(t){if(this.currentCachedFrameNumber===t&&this.frameDataCache)return this.frameDataCache;var e=this.curAnimation.defaultDataLength(),n=new Array(e);this.prio2index=new Array(e);for(var i=this.curAnimation.frameData(t),a=0;a<e;a++){var r=i.states(a),s=r.index(),o=r.flag1(),b=r.flag2(),c=-1,d=this.GetDefaultDataByIndex(s);d.flag1=o,d.flag2=b;var l=0;if(o&I.INVISIBLE&&(d.f_hide=!0),o&I.FLIP_H&&(d.f_flipH=!0),o&I.FLIP_V&&(d.f_flipV=!0),o&I.CELL_INDEX&&(d.cellIndex=r.data(l++)),o&I.POSITION_X&&(d.positionX=this.I2F(r.data(l++))),o&I.POSITION_Y&&(d.positionY=this.I2F(r.data(l++))),o&I.POSITION_Z&&l++,o&I.PIVOT_X&&(d.pivotX=this.I2F(r.data(l++))),o&I.PIVOT_Y&&(d.pivotY=this.I2F(r.data(l++))),o&I.ROTATIONX&&l++,o&I.ROTATIONY&&l++,o&I.ROTATIONZ&&(d.rotationZ=this.I2F(r.data(l++))),o&I.SCALE_X&&(d.scaleX=this.I2F(r.data(l++))),o&I.SCALE_Y&&(d.scaleY=this.I2F(r.data(l++))),o&I.LOCALSCALE_X&&(d.localscaleX=this.I2F(r.data(l++))),o&I.LOCALSCALE_Y&&(d.localscaleY=this.I2F(r.data(l++))),o&I.OPACITY&&(d.opacity=r.data(l++)),o&I.LOCALOPACITY&&(d.localopacity=r.data(l++)),o&I.SIZE_X&&(d.size_X=this.I2F(r.data(l++))),o&I.SIZE_Y&&(d.size_Y=this.I2F(r.data(l++))),o&I.U_MOVE&&(d.uv_move_X=this.I2F(r.data(l++))),o&I.V_MOVE&&(d.uv_move_Y=this.I2F(r.data(l++))),o&I.UV_ROTATION&&(d.uv_rotation=this.I2F(r.data(l++))),o&I.U_SCALE&&(d.uv_scale_X=this.I2F(r.data(l++))),o&I.V_SCALE&&(d.uv_scale_Y=this.I2F(r.data(l++))),o&I.BOUNDINGRADIUS&&l++,o&I.MASK&&(d.masklimen=r.data(l++)),o&I.PRIORITY&&(d.priority=r.data(l++)),o&I.INSTANCE_KEYFRAME&&(d.instanceValue_curKeyframe=r.data(l++),d.instanceValue_startFrame=r.data(l++),d.instanceValue_endFrame=r.data(l++),d.instanceValue_loopNum=r.data(l++),d.instanceValue_speed=this.I2F(r.data(l++)),d.instanceValue_loopflag=r.data(l++)),o&I.EFFECT_KEYFRAME&&(d.effectValue_curKeyframe=r.data(l++),d.effectValue_startTime=r.data(l++),d.effectValue_speed=this.I2F(r.data(l++)),d.effectValue_loopflag=r.data(l++)),o&I.VERTEX_TRANSFORM)d.f_mesh=!0,1&(h=d.i_transformVerts=r.data(l++))&&(d.u00=this.I2F(r.data(l++)),d.v00=this.I2F(r.data(l++))),2&h&&(d.u01=this.I2F(r.data(l++)),d.v01=this.I2F(r.data(l++))),4&h&&(d.u10=this.I2F(r.data(l++)),d.v10=this.I2F(r.data(l++))),8&h&&(d.u11=this.I2F(r.data(l++)),d.v11=this.I2F(r.data(l++)));if(o&I.PARTS_COLOR){var h;if(c=255&(h=r.data(l++)),d.useColorMatrix=1!==c,4096&h){var f=this.I2F(r.data(l++)),u=r.data(l++)<<16|r.data(l++);d.partsColorARGB=u>>>0,1===c?d.tint=16777215&u:d.colorMatrix=this.GetColorMatrixFilter(c,f,u)}2048&h&&(l++,l++,l++,d.colorMatrix=this.defaultColorFilter),1024&h&&(l++,l++,l++,d.colorMatrix=this.defaultColorFilter),512&h&&(l++,l++,l++,d.colorMatrix=this.defaultColorFilter),256&h&&(l++,l++,l++,d.colorMatrix=this.defaultColorFilter)}if(b&S.MESHDATA){d.meshIsBind=this.curAnimation.meshsDataUV(s).uv(0),d.meshNum=this.curAnimation.meshsDataUV(s).uv(1);for(var p=new Float32Array(3*d.meshNum),_=0;_<d.meshNum;_++){var m=this.I2F(r.data(l++)),y=this.I2F(r.data(l++)),v=this.I2F(r.data(l++));p[3*_+0]=m,p[3*_+1]=y,p[3*_+2]=v}d.meshDataPoint=p}n[s]=d,this.prio2index[a]=s,0===this.fbObj.animePacks(this.parts).parts(s).type()&&(n[s].cellIndex=-2)}return this.frameDataCache=n,this.currentCachedFrameNumber=t,n},e.prototype.GetColorMatrixFilter=function(t,e,n){var i=t.toString()+"_"+e.toString()+"_"+n.toString();if(this.colorMatrixFilterCache[i])return this.colorMatrixFilterCache[i];var a=new PIXI.filters.ColorMatrixFilter,r=((4278190080&n)>>>24)/255,s=((16711680&n)>>>16)/255,o=((65280&n)>>>8)/255,b=(255&n)/255;if(0===t){var c=1-e;a.matrix=[c,0,0,0,s*e,0,c,0,0,o*e,0,0,c,0,b*e,0,0,0,1,0]}else 1===t?a.matrix=[s,0,0,0,0,0,o,0,0,0,0,0,b,0,0,0,0,0,r,0]:2===t?a.matrix=[1,0,0,0,s,0,1,0,0,o,0,0,1,0,b,0,0,0,r,0]:3===t&&(a.matrix=[1,0,0,0,-s,0,1,0,0,-o,0,0,1,0,-b,0,0,0,r,0]);return this.colorMatrixFilterCache[i]=a,a},e.prototype.GetDefaultDataByIndex=function(t){var e=this.defaultFrameMap[t];return{index:e.index(),lowflag:e.lowflag(),highflag:e.highflag(),priority:e.priority(),cellIndex:e.cellIndex(),opacity:e.opacity(),localopacity:e.localopacity(),masklimen:e.masklimen(),positionX:e.positionX(),positionY:e.positionY(),pivotX:e.pivotX(),pivotY:e.pivotY(),rotationX:e.rotationX(),rotationY:e.rotationY(),rotationZ:e.rotationZ(),scaleX:e.scaleX(),scaleY:e.scaleY(),localscaleX:e.localscaleX(),localscaleY:e.localscaleY(),size_X:e.sizeX(),size_Y:e.sizeY(),uv_move_X:e.uvMoveX(),uv_move_Y:e.uvMoveY(),uv_rotation:e.uvRotation(),uv_scale_X:e.uvScaleX(),uv_scale_Y:e.uvScaleY(),boundingRadius:e.boundingRadius(),instanceValue_curKeyframe:e.instanceValueCurKeyframe(),instanceValue_endFrame:e.instanceValueEndFrame(),instanceValue_startFrame:e.instanceValueStartFrame(),instanceValue_loopNum:e.instanceValueLoopNum(),instanceValue_speed:e.instanceValueSpeed(),instanceValue_loopflag:e.instanceValueLoopflag(),effectValue_curKeyframe:e.effectValueCurKeyframe(),effectValue_startTime:e.effectValueStartTime(),effectValue_speed:e.effectValueSpeed(),effectValue_loopflag:e.effectValueLoopflag(),f_hide:!1,f_flipH:!1,f_flipV:!1,f_mesh:!1,i_transformVerts:0,u00:0,v00:0,u01:0,v01:0,u10:0,v10:0,u11:0,v11:0,useColorMatrix:!1,colorMatrix:null,meshIsBind:0,meshNum:0,meshDataPoint:0,flag1:0,flag2:0,partsColorARGB:0}},e.prototype.SetFrameAnimation=function(t,n){void 0===n&&(n=0);var i=this.GetFrameData(t);this.removeChildren();for(var a=i.length,r=0;r<a;r=r+1|0){var s=this.prio2index[r],o=i[s],b=o.cellIndex,d=this.prevMesh[s],l=this.fbObj.animePacks(this.parts).parts(s),h=l.type(),f=null!==this.substituteOverWrite[s]&&this.substituteOverWrite[s],u=this.substituteKeyParam[s];switch(h){case c.Instance:null==d&&((d=this.MakeCellPlayer(l.refname())).name=l.name());break;case c.Normal:case c.Mask:b>=0&&this.prevCellID[s]!==b&&(null!=d&&d.destroy(),(d=this.MakeCellMesh(b)).name=l.name());break;case c.Mesh:b>=0&&this.prevCellID[s]!==b&&(null!=d&&d.destroy(),(d=this.MakeMeshCellMesh(s,b)).name=l.name());break;case c.Nulltype:case c.Joint:this.prevCellID[s]!==b&&(null!=d&&d.destroy(),(d=new PIXI.Container).name=l.name());break;default:b>=0&&this.prevCellID[s]!==b&&(null!=d&&d.destroy(),(d=this.MakeCellMesh(b)).name=l.name())}if(null!=d)switch(this.prevCellID[s]=b,this.prevMesh[s]=d,h){case c.Instance:var p=new Float32Array(5);p[0]=0,p[1]=0,p[2]=1,p[3]=1,p[4]=0;var _=(p=this.TransformPositionLocal(p,o.index,t))[4]*Math.PI/180;d.rotation=_,d.position.set(p[0],p[1]),d.scale.set(p[2],p[3]);var m=o.opacity/255;o.localopacity<255&&(m=o.localopacity/255),d.SetAlpha(m*this.parentAlpha),d.visible=!o.f_hide;var y=o.instanceValue_curKeyframe,v=o.instanceValue_startFrame,S=o.instanceValue_endFrame,F=o.instanceValue_speed,P=o.instanceValue_loopNum,g=!1,E=!1,A=!1,D=!1,V=o.instanceValue_loopflag;1&V&&(g=!0),2&V&&(E=!0),4&V&&(A=!0),8&V&&(D=!0),f&&(v=u.refStartframe,S=u.refEndframe,F=u.refSpeed,P=u.refloopNum,g=u.infinity,E=u.reverse,A=u.pingpong,D=u.independent);var O=t;!0===D&&(this.liveFrame[r]+=n,O=Math.floor(this.liveFrame[r]));var M=y,C=Math.floor((O-M)*F);if(C<0)continue;if(M>O)continue;var L=S-v+1;if(L<=0)continue;var w=Math.floor(C/L),T=P;A&&(T*=2),g||w>=T&&(C=L-1,w=T-1);var N=Math.floor(C%L),x=0;A&&w%2==1&&(E=!E),this.playDirection<=-1&&(E=!E),x=E?S-N:N+v,d.SetFrame(Math.floor(x)),this.addChild(d);break;case c.Normal:case c.Mesh:case c.Joint:case c.Mask:var k=this.fbObj.cells(b),R=void 0;if(R=h===c.Mesh?0===o.meshIsBind?this.TransformMeshVertsLocal(e.GetMeshVerts(k,o),o.index,t):e.GetMeshVerts(k,o):this.TransformVertsLocal(e.GetVerts(k,o),o.index,t),o.flag1&I.VERTEX_TRANSFORM){var X=R[6],U=R[7],Y=R[2],j=R[3],B=R[8],z=R[9],G=R[4],Z=R[5],K=.5*(X+B),W=.5*(U+z),H=.5*(X+Y),$=.5*(U+j),J=.5*(Y+G),q=.5*(j+Z),Q=.5*(B+G),tt=.5*(z+Z),et=e.CoordinateGetDiagonalIntersection(R[0],R[1],K,W,Q,tt,H,$,J,q);R[0]=et[0],R[1]=et[1]}for(var nt=R[0],it=R[1],at=0;at<R.length/2;at++)R[2*at]-=nt,R[2*at+1]-=it;if(d.vertices=R,o.flag1&I.U_MOVE||o.flag1&I.V_MOVE||o.flag1&I.U_SCALE||o.flag1&I.V_SCALE||o.flag1&I.UV_ROTATION){var rt=k.u1()+o.uv_move_X,st=k.u2()+o.uv_move_X,ot=k.v1()+o.uv_move_Y,bt=k.v2()+o.uv_move_Y,ct=(st+rt)/2,dt=(bt+ot)/2,lt=(st-rt)/2*o.uv_scale_X,ht=(bt-ot)/2*o.uv_scale_Y;if(d.uvs[0]=ct,d.uvs[1]=dt,d.uvs[2]=ct-lt,d.uvs[3]=dt-ht,d.uvs[4]=ct+lt,d.uvs[5]=dt-ht,d.uvs[6]=ct-lt,d.uvs[7]=dt+ht,d.uvs[8]=ct+lt,d.uvs[9]=dt+ht,o.flag1&I.UV_ROTATION){_=o.uv_rotation*Math.PI/180;for(var ft=0;ft<5;ft++){var ut=d.uvs[2*ft+0]-ct,pt=d.uvs[2*ft+1]-dt,_t=Math.cos(_),mt=Math.sin(_),yt=_t*ut-mt*pt,vt=mt*ut+_t*pt;d.uvs[2*ft+0]=ct+yt,d.uvs[2*ft+1]=dt+vt}}d.dirty++}d.position.set(nt,it);m=o.opacity/255;if(o.localopacity<255&&(m=o.localopacity/255),d.alpha=m*this.parentAlpha,d.visible=!o.f_hide,o.useColorMatrix&&(d.filters=[o.colorMatrix]),o.tint){d.tint=o.tint;var It=((4278190080&o.partsColorARGB)>>>24)/255;d.alpha=d.alpha*It}o.tintRgb&&(d.tintRgb=o.tintRgb);var St=this.alphaBlendType[s];0===St&&(d.blendMode=PIXI.BLEND_MODES.NORMAL),1===St&&(d.blendMode=PIXI.BLEND_MODES.MULTIPLY,d.alpha=1),2===St&&(d.blendMode=PIXI.BLEND_MODES.ADD),3===St&&(d.blendMode=PIXI.BLEND_MODES.NORMAL),4===St&&(d.blendMode=PIXI.BLEND_MODES.MULTIPLY),5===St&&(d.blendMode=PIXI.BLEND_MODES.SCREEN,d.alpha=1),6===St&&(d.blendMode=PIXI.BLEND_MODES.EXCLUSION),7===St&&(d.blendMode=PIXI.BLEND_MODES.NORMAL),h!==c.Mask&&this.addChild(d);break;case c.Nulltype:m=this.InheritOpacity(1,o.index,t);d.alpha=m*o.localopacity/255;nt=(R=this.TransformVerts(e.GetDummyVerts(),o.index,t))[0],it=R[1];d.position.set(nt,it);var Ft=Math.atan2(R[5]-R[3],R[4]-R[2]),Pt=Math.atan2(R[7]-R[3],R[6]-R[2]);d.rotation=Ft,d.skew.x=Pt-Ft-Math.PI/2}}},e.prototype.ChangeInstanceAnime=function(t,n,i,a,r){void 0===r&&(r=null);var s=!1;if(null!==this.curAnimePackName&&null!==this.curAnimation)for(var o=this.curAnimePackData,b=o.partsLength(),c=0;c<b;c++){var d=o.parts(c);if(d.name()===t){var l=this.prevMesh[c];if(null===l||l instanceof e){if((l=this.MakeCellPlayer(n+"/"+i)).name=d.name(),this.prevMesh[c]=l,this.substituteOverWrite[c]=a,null===r){var h=new k;h.refStartframe=l.startFrame,h.refEndframe=l.endFrame,this.substituteKeyParam[c]=h}else this.substituteKeyParam[c]=r;s=!0;break}}}return s},e.prototype.InheritOpacity=function(t,e,n){return t=this.GetFrameData(n)[e].opacity/255,this.parentIndex[e]>=0&&(t=this.InheritOpacity(t,this.parentIndex[e],n)),t},e.prototype.TransformVertsLocal=function(t,e,n){for(var i=this.GetFrameData(n)[e],a=-i.rotationZ*Math.PI/180,r=Math.cos(a),s=Math.sin(a),o=0;o<t.length/2;o++){var b=t[2*o],c=t[2*o+1];1&i.i_transformVerts&&1===o&&(b+=i.u00,c-=i.v00),2&i.i_transformVerts&&2===o&&(b+=i.u01,c-=i.v01),4&i.i_transformVerts&&3===o&&(b+=i.u10,c-=i.v10),8&i.i_transformVerts&&4===o&&(b+=i.u11,c-=i.v11),b*=i.scaleX*i.localscaleX,c*=i.scaleY*i.localscaleY,t[2*o]=r*b-s*c+i.positionX,t[2*o+1]=s*b+r*c-i.positionY,i.f_flipH&&(t[2*o]=2*t[0]-t[2*o]),i.f_flipV&&(t[2*o+1]=2*t[1]-t[2*o+1])}return this.parentIndex[e]>=0&&(t=this.TransformVerts(t,this.parentIndex[e],n)),t},e.prototype.TransformMeshVertsLocal=function(t,e,n){for(var i=this.GetFrameData(n)[e],a=-i.rotationZ*Math.PI/180,r=Math.cos(a),s=Math.sin(a),o=0;o<t.length/2;o++){var b=t[2*o],c=t[2*o+1];b*=i.scaleX*i.localscaleX,c*=i.scaleY*i.localscaleY,t[2*o]=r*b-s*c+i.positionX,t[2*o+1]=s*b+r*c-i.positionY}return this.parentIndex[e]>=0&&(t=this.TransformVerts(t,this.parentIndex[e],n)),t},e.prototype.TransformPositionLocal=function(t,e,n){var i=this.GetFrameData(n)[e];t[4]+=-i.rotationZ;var a=-i.rotationZ*Math.PI/180,r=Math.cos(a),s=Math.sin(a),o=t[0],b=t[1];return t[2]*=i.scaleX*i.localscaleX,t[3]*=i.scaleY*i.localscaleY,t[0]=r*o-s*b+i.positionX,t[1]=s*o+r*b-i.positionY,this.parentIndex[e]>=0&&(t=this.TransformPosition(t,this.parentIndex[e],n)),t},e.CoordinateGetDiagonalIntersection=function(t,e,n,i,a,r,s,o,b,c){var d=new Float32Array([t,e]),l=(b-n)*(o-r)-(c-i)*(s-a);if(l<=0&&l>=0)return d;var h=((o-r)*(s-n)-(s-a)*(o-i))/l,f=((b-n)*(o-i)-(c-i)*(s-n))/l;return 0<=h&&1>=h&&0<=f&&1>=f&&(t=n+h*(b-n),e=i+h*(c-i)),d[0]=t,d[1]=e,d},e.prototype.TransformVerts=function(t,e,n){for(var i=this.GetFrameData(n)[e],a=-i.rotationZ*Math.PI/180,r=Math.cos(a),s=Math.sin(a),o=0;o<t.length/2;o++){var b=t[2*o],c=t[2*o+1];b*=i.scaleX,c*=i.scaleY,t[2*o]=r*b-s*c+i.positionX,t[2*o+1]=s*b+r*c-i.positionY,i.f_flipH&&(t[2*o]=2*t[0]-t[2*o]),i.f_flipV&&(t[2*o+1]=2*t[1]-t[2*o+1])}return this.parentIndex[e]>=0&&(t=this.TransformVerts(t,this.parentIndex[e],n)),t},e.prototype.TransformPosition=function(t,e,n){var i=this.GetFrameData(n)[e];t[4]+=-i.rotationZ;var a=-i.rotationZ*Math.PI/180,r=Math.cos(a),s=Math.sin(a),o=t[0],b=t[1];return t[2]*=i.scaleX,t[3]*=i.scaleY,t[0]=r*o-s*b+i.positionX,t[1]=s*o+r*b-i.positionY,this.parentIndex[e]>=0&&(t=this.TransformPosition(t,this.parentIndex[e],n)),t},e.prototype.MakeCellMesh=function(t){var e=this.fbObj.cells(t),n=e.u1(),i=e.u2(),a=e.v1(),r=e.v2(),s=e.width()/2,o=e.height()/2,b=new Float32Array([0,0,-s,-o,s,-o,-s,o,s,o]),c=new Float32Array([(n+i)/2,(a+r)/2,n,a,i,a,n,r,i,r]),d=new Uint16Array([0,1,2,0,2,4,0,4,3,0,1,3]);return new PIXI.SimpleMesh(this.resources[e.cellMap().name()].texture,b,c,d,PIXI.DRAW_MODES.TRIANGLES)},e.prototype.MakeMeshCellMesh=function(t,e){var n=this.curAnimation.meshsDataUV(t),i=n.uvLength();if(i>0){for(var a=new Float32Array(i-2),r=n.uv(1),s=2;s<i;s++)a[s-2]=n.uv(s);var o=this.curAnimation.meshsDataIndices(t),b=o.indicesLength(),c=new Uint16Array(b-1);for(s=1;s<b;s++)c[s-1]=o.indices(s);var d=new Float32Array(2*r);return new PIXI.SimpleMesh(this.resources[this.fbObj.cells(e).cellMap().name()].texture,d,a,c,PIXI.DRAW_MODES.TRIANGLES)}return null},e.prototype.MakeCellPlayer=function(t){var n=t.split("/"),i=new e(this.ss6project);return i.Setup(n[0],n[1]),i.Play(),i},e.GetVerts=function(t,e){var n=e.size_X/2,i=e.size_Y/2,a=e.size_X*-(e.pivotX+t.pivotX()),r=e.size_Y*(e.pivotY+t.pivotY());return new Float32Array([a,r,a-n,r-i,a+n,r-i,a-n,r+i,a+n,r+i])},e.GetMeshVerts=function(t,e){for(var n=new Float32Array(2*e.meshNum),i=0;i<e.meshNum;i++)n[2*i+0]=e.meshDataPoint[3*i+0],n[2*i+1]=-e.meshDataPoint[3*i+1];return n},e.GetDummyVerts=function(){return new Float32Array([0,0,-.5,-.5,.5,-.5,-.5,.5,.5,.5])},e.prototype.resetLiveFrame=function(){for(var t=this.curAnimation.defaultDataLength(),e=0;e<t;e++)this.liveFrame[e]=0},e}(PIXI.Container);class X{static instance;pluginParameters;animationDir;replaceSVActorSpriteFlag;svActorDir;svActorAnimationPack;svActorHideWeaponGraphics;replaceSVEnemySpriteFlag;svEnemyDir;svEnemyAnimationPack;svEnemyAnimationName;constructor(){this.pluginParameters=PluginManager.parameters("ss6player-rpgmakermz"),this.animationDir=String(this.pluginParameters.animationDir||"img/ssfb")+"/",this.replaceSVActorSpriteFlag="true"===this.pluginParameters.replaceSVActorSpriteFlag||!1,this.svActorDir=String(this.pluginParameters.svActorDir||"img/ssfb/sv_actors")+"/",this.svActorAnimationPack=String(this.pluginParameters.svActorAnimationPack||"motions"),this.svActorHideWeaponGraphics="true"===this.pluginParameters.svActorHideWeaponGraphics||!1,this.replaceSVEnemySpriteFlag="true"===this.pluginParameters.replaceSVEnemySpriteFlag||!1,this.svEnemyDir=String(this.pluginParameters.svEnemyDir||"img/ssfb/sv_enemies")+"/",this.svEnemyAnimationPack=String(this.pluginParameters.svEnemyAnimationPack||"motions"),this.svEnemyAnimationName=String(this.pluginParameters.svEnemyAnimationName||"walk")}static getInstance(){return X.instance||(X.instance=new X),X.instance}}class U{static instance;ssprojectMap;_isLoading;constructor(){this.clear(),this._isLoading=!1}prepare(t){this.ssprojectMap.set(t,null),this._isLoading=!0}isLoading(){return this._isLoading}isExist(t){return this.ssprojectMap.has(t)&&null!==this.ssprojectMap.get(t)}set(t,e){this.ssprojectMap.set(t,e),this._isLoading=!1}get(t){return this.ssprojectMap.has(t)?this.ssprojectMap.get(t):null}clear(){this.ssprojectMap=new Map}static getInstance(){return U.instance||(U.instance=new U),U.instance}}const Y="ss6player-rpgmakermz",j="ss6projectLoadWait",B="ss6playerPlayWaitMode";let z=!1,G=null,Z=null,K=null;PluginManager.registerCommand(Y,"loadSsfb",(function(t){const e=Number(t.ssfbId),n=t.ssfbFile,i=X.getInstance().animationDir+n;if(U.getInstance().isExist(e)){if(i===U.getInstance().get(e).ssfbPath)return}this.setWaitMode(j),U.getInstance().prepare(e);let a=new N(i,(()=>{U.getInstance().set(e,a)}),18e4,3,((t,e,n,i)=>{throw this.setWaitMode(""),i}),((t,e,n,i)=>{throw console.log("timeout download ssfb file: "+t),this.setWaitMode(""),i}),null)})),PluginManager.registerCommand(Y,"setAsPicture",(function(t){const e=Number(t.ssfbId),n=t.animePackName,i=t.animeName,a=Number(t.scaleX)||1,r=Number(t.scaleY)||1,s=Number(t.loop)||1;let o=U.getInstance().get(e);if(null===o){const t="not found ssfbId: "+e;throw console.error(t),t}let b=new R(o,n,i);b.scale=new PIXI.Point(a,r),b.loop=s,G=b})),PluginManager.registerCommand(Y,"waitForPicture",(function(t){const e=Number(t.pictureId)||1,n=$gameScreen.picture(e);if(n&&n.mzkpSS6Player){if(n.mzkpSS6Player instanceof R){-1!==n.mzkpSS6Player.loop?(this.setWaitMode(B),z=!0,Z=function(t){0===t.loop&&(z=!1)}):console.warn("pictureId: "+e+" can not wait SS6Player because setting infinity loop.")}}else console.warn("pictureId: "+e+" not have SS6Player")}));const W=Game_Interpreter.prototype.updateWaitMode;Game_Interpreter.prototype.updateWaitMode=function(){let t=!1;return t=this._waitMode===j?U.getInstance().isLoading():this._waitMode===B?z:W.call(this),t};const H=Game_Picture.prototype.show;Game_Picture.prototype.show=function(){H.apply(this,arguments),""===this._name&&null!==G&&(this.mzkpSS6Player=G,this.mzkpSS6PlayerChanged=!0,G=null)};const $=Sprite_Picture.prototype.destroy;Sprite_Picture.prototype.destroy=function(t){null!==this.mzkpSS6Player&&this.mzkpSS6Player instanceof R&&(this.mzkpSS6Player.Stop(),this.picture().mzkpSS6PlayerPrevFrameNo=this.mzkpSS6Player.frameNo,this.removeChild(this.mzkpSS6Player),this.mzkpSS6Player=null),$.call(this,t)};const J=Scene_Base.prototype.terminate;Scene_Base.prototype.terminate=function(){$gameActors._data.forEach(((t,e,n)=>{t&&t._svActorSS6Player&&(t._svActorSS6Player.Stop(),t._svActorSS6PlayerParent.removeChild(t._svActorSS6Player),t._svActorSS6Player=null,t._svActorSS6PlayerParent=null)})),$gameTroop.members().forEach(((t,e,n)=>{t&&t._svEnemySS6Player&&(t._svEnemySS6Player.Stop(),t._svEnemySS6PlayerParent.removeChild(t._svEnemySS6Player),t._svEnemySS6ProjectLoaded=!1,t._svEnemySS6Player=null,t._svEnemySS6PlayerParent=null)})),J.apply(this,arguments)};const q=Sprite_Picture.prototype.updateBitmap;Sprite_Picture.prototype.updateBitmap=function(){if(q.apply(this,arguments),this.visible&&""===this._pictureName){const t=this.picture(),e=t&&t.mzkpSS6Player||null,n=t&&t.mzkpSS6PlayerChanged;if(this.mzkpSS6Player!==e||n)if(null!==e){if(0===e.loop)return void(this.mzkpSS6Player=null);const n=Z,i=K,a=this;e.SetPlayEndCallback((()=>{null!==n&&n(e),0===e.loop&&(e.Stop(),a.removeChild(e)),null!==i&&i(e)})),this.mzkpSS6Player=e,this.addChild(this.mzkpSS6Player),this.mzkpSS6Player.Play(t.mzkpSS6PlayerPrevFrameNo),t.mzkpSS6PlayerChanged=!1,Z=null,K=null}else this.mzkpSS6Player=null}else null!==this.mzkpSS6Player&&this.mzkpSS6Player instanceof R&&(this.mzkpSS6Player.Stop(),this.removeChild(this.mzkpSS6Player)),this.mzkpSS6Player=null};const Q=Game_Screen.prototype.clear;Game_Screen.prototype.clear=function(){U.getInstance().clear(),Q.call(this)};let tt=!1;const et=SceneManager.updateScene;SceneManager.updateScene=function(){et.apply(this,arguments),this._scene&&(this.isGameActive()?tt&&($gameScreen._pictures.forEach(((t,e,n)=>{t&&t.mzkpSS6Player&&t.mzkpSS6Player.Resume()})),$gameActors._data.forEach(((t,e,n)=>{t&&t._svActorSS6Player&&t._svActorSS6Player.Resume()})),$gameTroop.members().forEach(((t,e,n)=>{t&&t._svEnemySS6Player&&t._svEnemySS6Player.Resume()})),tt=!1):($gameScreen&&$gameScreen._pictures&&$gameScreen._pictures.forEach(((t,e,n)=>{t&&t.mzkpSS6Player&&t.mzkpSS6Player.Pause()})),$gameActors&&$gameActors._data&&$gameActors._data.forEach(((t,e,n)=>{t&&t._svActorSS6Player&&t._svActorSS6Player.Pause()})),$gameTroop&&$gameTroop.members()&&$gameTroop.members().forEach(((t,e,n)=>{t&&t._svEnemySS6Player&&t._svEnemySS6Player.Pause()})),tt=!0))};let nt=!1;const it=DataManager.isDatabaseLoaded;DataManager.isDatabaseLoaded=function(){return X.getInstance().replaceSVEnemySpriteFlag?!!it.call(this)&&(nt||(this.loadEnemyNoteTags(),nt=!0),!0):it.call(this)};DataManager.loadEnemyNoteTags=function(){const t=new RegExp("<SS6SVEnemy (.*):(.*)>","i");$dataEnemies.forEach(((e,n,i)=>{if(null===e)return;e.note.split(/\r?\n/).forEach(((n,i,a)=>{const r=t.exec(n);if(r&&3===r.length){const t=r[1].toLowerCase(),n=r[2];switch(t){case"file".toLowerCase():e._svEnemyFile=n;break;case"animationPackName".toLowerCase():e._svEnemyAnimationPackName=n;break;case"animationName".toLowerCase():e._svEnemyAnimationName=n;break;case"scaleX".toLowerCase():e._svEnemyScaleX=Number(n);break;case"scaleY".toLowerCase():e._svEnemyScaleY=Number(n);break;case"offsetX".toLowerCase():e._svEnemyOffsetX=Number(n);break;case"offsetY".toLowerCase():e._svEnemyOffsetY=Number(n)}}}))}))},Sprite_Actor.svActorSsfbId=function(t){return"sv_actor_"+t},Sprite_Actor.svActorSsfbDir=function(t){return X.getInstance().svActorDir+String(t)+"/"},Sprite_Actor.svActorSsfbPath=function(t){return Sprite_Actor.svActorSsfbDir(t)+String(t)+".ssbp.ssfb"};let at=new Map;const rt=Sprite_Actor.prototype.setBattler;Sprite_Actor.prototype.setBattler=function(t){const e=t!==this._actor;if(rt.call(this,t),X.getInstance().replaceSVActorSpriteFlag&&e){const t=this._actor.actorId(),e=Sprite_Actor.svActorSsfbId(t);if(at.has(e))return;let n=Sprite_Actor.svActorSsfbPath(t);if(U.getInstance().isExist(e)){if(n===U.getInstance().get(e).ssfbPath)return this._actor._svActorSS6Player=null,void(this._actor._svActorSS6PlayerParent=null)}U.getInstance().prepare(e);let i=new N(n,(()=>{this._actor._svActorSS6Player=null,this._actor._svActorSS6PlayerParent=null,U.getInstance().set(e,i)}),18e4,3,((t,n,i,a)=>{at.set(e,null),U.getInstance().set(e,null)}))}};const st=Sprite_Actor.prototype.updateBitmap;Sprite_Actor.prototype.updateBitmap=function(){if(X.getInstance().replaceSVActorSpriteFlag){const t=this._actor.actorId(),e=Sprite_Actor.svActorSsfbId(t);U.getInstance().isExist(e)&&void 0!==this._actor._svActorSS6Player?(Sprite_Battler.prototype.updateBitmap.call(this),this._mainSprite.bitmap=null,this.updateSS6Player()):st.call(this)}else st.call(this)},Sprite_Actor.prototype.updateSS6Player=function(){let t="";for(let e in Sprite_Actor.MOTIONS){const n=Sprite_Actor.MOTIONS[e];this._motion===n&&(t=e)}if(""===t&&(t="walk"),null===this._actor._svActorSS6Player||this._actor._svActorSS6Player.animeName!==t){this._actor._svActorSS6Player&&(this._mainSprite.removeChild(this._actor._svActorSS6Player),this._actor._svActorSS6Playe=null,this._actor._svActorSS6PlayerParent=null);const e=this._motion.loop,n=this._actor.actorId(),i=Sprite_Actor.svActorSsfbId(n),a=U.getInstance().get(i),r=X.getInstance().svActorAnimationPack;this._actor._svActorSS6Player=new R(a,r,t),this._actor._svActorSS6Player.loop=e?-1:1,this._actor._svActorSS6Player.SetPlayEndCallback((t=>{0===t.loop&&this.refreshMotion()})),this._actor._svActorSS6Player.Play(),this._mainSprite.addChild(this._actor._svActorSS6Player),this._actor._svActorSS6PlayerParent=this._mainSprite}};const ot=Sprite_Actor.prototype.setupWeaponAnimation;Sprite_Actor.prototype.setupWeaponAnimation=function(){X.getInstance().replaceSVActorSpriteFlag&&X.getInstance().svActorHideWeaponGraphics?void 0===this._actor._svActorSS6Player&&ot.call(this):ot.call(this)},Sprite_Enemy.svEnemySsfbId=function(t){return"sv_enemy_"+t},Sprite_Enemy.svEnemySsfbDir=function(t){return X.getInstance().svEnemyDir+String(t)+"/"},Sprite_Enemy.svEnemySsfbPath=function(t){return Sprite_Enemy.svEnemySsfbDir(t)+String(t)+".ssbp.ssfb"};let bt=new Map;const ct=Sprite_Enemy.prototype.setBattler;Sprite_Enemy.prototype.setBattler=function(t){const e=t!==this._enemy;if(ct.call(this,t),X.getInstance().replaceSVEnemySpriteFlag&&e){const t=this._enemy.enemyId(),e=Sprite_Enemy.svEnemySsfbId(t);if(bt.has(e))return;let n=Sprite_Enemy.svEnemySsfbPath(t);const i=this._enemy.enemy();if(i._svEnemyFile&&(n=X.getInstance().animationDir+i._svEnemyFile),this._enemy._svEnemySS6ProjectLoaded=!1,U.getInstance().isExist(e)){if(n===U.getInstance().get(e).ssfbPath)return this._enemy._svEnemySS6ProjectLoaded=!0,this._enemy._svEnemySS6Player=null,void(this._enemy._svEnemySS6PlayerParent=null)}U.getInstance().prepare(e);let a=new N(n,(()=>{this._enemy._svEnemySS6ProjectLoaded=!0,this._enemy._svEnemySS6Player=null,this._enemy._svEnemySS6PlayerParent=null,U.getInstance().set(e,a)}),18e4,3,((t,n,i,a)=>{this._enemy._svEnemySS6ProjectLoaded=!0,bt.set(e,null),U.getInstance().set(e,null)}))}};const dt=Sprite_Enemy.prototype.updateBitmap;Sprite_Enemy.prototype.updateBitmap=function(){if(X.getInstance().replaceSVEnemySpriteFlag){const t=this._enemy.enemyId(),e=Sprite_Enemy.svEnemySsfbId(t);if(!this._enemy._svEnemySS6ProjectLoaded)return;U.getInstance().isExist(e)&&void 0!==this._enemy._svEnemySS6Player?(Sprite_Battler.prototype.updateBitmap.call(this),this.bitmap=null,this.updateSS6Player()):dt.call(this)}else dt.call(this)},Sprite_Enemy.prototype.updateSS6Player=function(){if(null===this._enemy._svEnemySS6Player){const t=this._enemy.enemyId(),e=Sprite_Enemy.svEnemySsfbId(t),n=U.getInstance().get(e);let i=X.getInstance().svEnemyAnimationPack,a=X.getInstance().svEnemyAnimationName,r=1,s=1,o=0,b=0;const c=this._enemy.enemy();c._svEnemyAnimationPackName&&(i=c._svEnemyAnimationPackName),c._svEnemyAnimationName&&(a=c._svEnemyAnimationName),c._svEnemyScaleX&&(r=c._svEnemyScaleX),c._svEnemyScaleY&&(s=c._svEnemyScaleY),c._svEnemyOffsetX&&(o=c._svEnemyOffsetX),c._svEnemyOffsetY&&(b=c._svEnemyOffsetY),this._enemy._svEnemySS6Player=new R(n,i,a),this._enemy._svEnemySS6Player.loop=-1,this._enemy._svEnemySS6Player.SetPlayEndCallback((t=>{})),this._enemy._svEnemySS6Player.scale.x=r,this._enemy._svEnemySS6Player.scale.y=s,this._enemy._svEnemySS6Player.position.x+=o,this._enemy._svEnemySS6Player.position.y+=b,this._enemy._svEnemySS6Player.Play(),this.addChild(this._enemy._svEnemySS6Player),this._enemy._svEnemySS6PlayerParent=this}};const lt=Sprite_Enemy.prototype.updateFrame;Sprite_Enemy.prototype.updateFrame=function(){if(X.getInstance().replaceSVEnemySpriteFlag){const t=this._enemy.enemyId(),e=Sprite_Enemy.svEnemySsfbId(t);if(!this._enemy._svEnemySS6ProjectLoaded)return;if(U.getInstance().isExist(e)&&void 0!==this._enemy._svEnemySS6Player){if(this.bitmap)return void lt.call(this);Sprite_Battler.prototype.updateFrame.call(this);const t=this._enemy._svEnemySS6Player;let e=0,n=0;t&&(e=t.width,n=t.height),"bossCollapse"===this._effectType?this.setFrame(0,0,e,this._effectDuration):this.setFrame(0,0,e,n)}else lt.call(this)}else lt.call(this)};const ht=Sprite_Enemy.prototype.updateStateSprite;Sprite_Enemy.prototype.updateStateSprite=function(){if(X.getInstance().replaceSVEnemySpriteFlag)if(this.bitmap)this._stateIconSprite.y=-Math.round(.9*(this.bitmap.height+40)),this._stateIconSprite.y<20-this.y&&(this._stateIconSprite.y=20-this.y);else{let t=0;this._enemy&&this._enemy._svEnemySS6Player&&(t=this._enemy._svEnemySS6Player),this._stateIconSprite.y=-Math.round(.9*(t+40)),this._stateIconSprite.y<20-this.y&&(this._stateIconSprite.y=20-this.y)}else ht.call(this)}}();
